<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh" data-whc_version="26.0">
    <head><link rel="shortcut icon" href="../../../../favicon.ico"/><link rel="icon" href="../../../../favicon.ico"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="description" content="在 Python API 中，可以使用 DolphinDB Python API 的原生方法来创建、使用数据库及数据表，本节将介绍如何创建数据表、使用 SQL 操作数据表。 Python API 将 DolphinDB 服务端的数据表对象句柄，在 API 包装为 Table 类，封装实现部分功能。通常使用 session.table 或 session.loadTable 方法构造，也可以通过 ..."/><meta name="DC.rights.owner" content="(C) 版权 2024"/><meta name="copyright" content="(C) 版权 2024"/><meta name="generator" content="DITA-OT"/><meta name="DC.type" content="topic"/><meta name="DC.coverage" content=""/><meta name="DC.relation" content="../../../../api/python/AdvancedOperations/ddb_ooo.html"/><meta name="prodname" content="DolphinDB"/><meta name="brand" content="DolphinDB"/><meta name="DC.creator" content="DolphinDB"/><meta name="DC.publisher" content="DDB N/A DDB 200"/><meta name="DC.format" content="HTML5"/><meta name="DC.identifier" content="table"/><title>Table</title><!--  Generated with Oxygen version 26.0, build number 2024012323.  --><meta name="wh-path2root" content="../../../../"/><meta name="wh-toc-id" content="&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;&lt;?workdir /tmp/temp20240704100525325/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects?&gt;&lt;?workdir-uri file:/tmp/temp20240704100525325/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/?&gt;&lt;?path2project ../../../../?&gt;&lt;?path2project-uri ../../../../?&gt;&lt;?path2rootmap-uri ../../../../?&gt;&lt;topic xmlns:dita-ot=&#34;http://dita-ot.sourceforge.net/ns/201007/dita-ot&#34; xmlns:ditaarch=&#34;http://dita.oasis-open.org/architecture/2005/&#34; class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;table&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;Table&lt;/title&gt;&lt;prolog class=&#34;- topic/prolog &#34;&gt;&lt;author class=&#34;- topic/author &#34; xtrc=&#34;author:1;12:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/author&gt;&lt;publisherinformation class=&#34;- topic/publisher bookmap/publisherinformation &#34; xtrc=&#34;publisherinformation:1;14:31&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;person class=&#34;- topic/data bookmap/person &#34; xtrc=&#34;person:1;15:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DDB&lt;/person&gt; &lt;printlocation class=&#34;- topic/data bookmap/printlocation &#34; xtrc=&#34;printlocation:1;16:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;N/A&lt;/printlocation&gt; &lt;published class=&#34;- topic/data bookmap/published &#34; xtrc=&#34;published:1;17:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;person class=&#34;- topic/data bookmap/person &#34; xtrc=&#34;person:2;18:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DDB&lt;/person&gt; &lt;publishtype class=&#34;- topic/data bookmap/publishtype &#34; value=&#34;HTML&#34; xtrc=&#34;publishtype:1;19:44&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;revisionid class=&#34;- topic/ph bookmap/revisionid &#34; xtrc=&#34;revisionid:1;20:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;200&lt;/revisionid&gt; &lt;summary class=&#34;- topic/ph bookmap/summary &#34; xtrc=&#34;summary:1;22:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;data class=&#34;- topic/data &#34; xtrc=&#34;data:1;23:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;/published&gt; &lt;data class=&#34;- topic/data &#34; xtrc=&#34;data:2;25:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;/publisherinformation&gt;&lt;metadata class=&#34;- topic/metadata &#34;&gt;&lt;audience class=&#34;- topic/audience &#34; xtrc=&#34;audience:2;39:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;audience class=&#34;- topic/audience &#34; xtrc=&#34;audience:1;28:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;category class=&#34;- topic/category &#34; xtrc=&#34;category:1;29:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;prodinfo class=&#34;- topic/prodinfo &#34; xtrc=&#34;prodinfo:1;34:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;prodname class=&#34;- topic/prodname &#34; xtrc=&#34;prodname:1;35:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/prodname&gt; &lt;brand class=&#34;- topic/brand &#34; xtrc=&#34;brand:1;36:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/brand&gt; &lt;/prodinfo&gt;&lt;/metadata&gt;&lt;/prolog&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:1;3:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;在 Python API 中，可以使用 DolphinDB Python API 的原生方法来创建、使用数据库及数据表，本节将介绍如何创建数据表、使用 SQL 操作数据表。&lt;/p&gt;&lt;/body&gt;&lt;related-links class=&#34;- topic/related-links &#34;&gt;&lt;linkpool class=&#34;- topic/linkpool &#34; xtrc=&#34;topicref:78;248:58&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/chap_connapi.ditamap&#34;&gt;&lt;link class=&#34;- topic/link &#34; format=&#34;dita&#34; href=&#34;../../../../api/python/AdvancedOperations/ddb_ooo.dita&#34; mapclass=&#34;- map/topicref &#34; role=&#34;parent&#34; scope=&#34;local&#34; type=&#34;topic&#34; xtrc=&#34;topicref:76;242:77&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/chap_connapi.ditamap&#34;&gt;&lt;?ditaot usertext?&gt;&lt;linktext class=&#34;- topic/linktext &#34;&gt;&lt;?ditaot gentext?&gt;面向对象数据库操作&lt;/linktext&gt;&lt;/link&gt;&lt;/linkpool&gt;&lt;/related-links&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;table-与-sessiontable&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:2;5:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:2;5:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;Table 与 session.table&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:2;5:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:2;7:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;Python API 将 DolphinDB 服务端的数据表对象句柄，在 API 包装为 Table 类，封装实现部分功能。通常使用 session.table 或 session.loadTable 方法构造，也可以通过 loadText 等函数获得。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:3;9:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;接口如下：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:1;11:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;session.table(dbPath=None, data=None, tableAliasName=None, inMem=False, partitions=None)&lt;/codeblock&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:1;15:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:1;15:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:1;15:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;dbPath&lt;/b&gt;：数据库路径，内存表或流数据表无需指定该参数。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:2;16:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:2;16:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;data&lt;/b&gt;：数据表的数据，可以为 dict、pd.DataFrame 或 DolphinDB 服务端数据表名。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:3;17:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:3;17:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;tableAliasName&lt;/b&gt;：表的别名。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:4;18:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:4;18:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;inMem&lt;/b&gt;：是否加载表数据到 DolphinDB 服务端内存中。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:5;19:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:5;19:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;partitions&lt;/b&gt;：将被加载到 DolphinDB 服务端内存中的分区。&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;上传数据为临时表&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:3;21:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:3;21:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;上传数据为临时表&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:3;21:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:4;23:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;如果 data 参数传入 dict 或 pd.DataFrame，则表示上传该对象到 DolphinDB 服务端为临时表，此时无需指定 dbPath、inMem、partitions。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:5;25:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;代码示例如下：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:2;27:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;data1 = pd.DataFrame({ 'a': [1, 2, 3], 'b': [4, 5, 6], }) t1 = s.table(data=data1) print(t1, t1.tableName()) data2 = { 'a': ['a', 'b', 'c'], 'b': [1, 2, 3], } t2 = s.table(data=data2) print(t2, t2.tableName())&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:6;42:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;输出结果如下：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:3;44:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;lt;dolphindb.table.Table object at 0x7fbd5f02bd60&amp;gt; TMP_TBL_3cc57246 &amp;lt;dolphindb.table.Table object at 0x7fbd3205fc70&amp;gt; TMP_TBL_dbae4978&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:7;49:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;data1 和 data2 都作为临时表上传至服务端，对应表名分别为 TMP_TBL_3cc57246 和 TMP_TBL_dbae4978。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;获取服务端数据表句柄&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:4;51:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:4;51:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;获取服务端数据表句柄&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:4;51:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:8;53:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;data 参数传入字符串，则表示获取服务端数据表句柄。&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:1;55:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:6;55:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:9;55:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;如果同时指定 dbPath 和 data，执行函数则表示从 dbPath 对应的数据库中加载表名为 data 的数据表。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:4;57:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;dbPath = &#34;dfs://testTable&#34; if s.existsDatabase(dbPath): s.dropDatabase(dbPath) db = s.database(partitionType=keys.VALUE, partitions=[1, 2, 3], dbPath=dbPath, engine=&#34;TSDB&#34;) s.run(&#34;schema_t = table(100:0, `ctime`csymbol`price`qty, [TIMESTAMP, SYMBOL, DOUBLE, INT])&#34;) schema_t = s.table(data=&#34;schema_t&#34;) db.createTable(schema_t, &#34;pt&#34;, [&#34;csymbol&#34;]) pt = s.table(dbPath=dbPath, data=&#34;pt&#34;) print(pt, pt.tableName()) print(pt.toDF())&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:10;70:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;输出结果如下：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:5;72:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;lt;dolphindb.table.Table object at 0x7f5036bcd040&amp;gt; pt_TMP_TBL_5229a3cc Empty DataFrame Columns: [ctime, csymbol, price, qty] Index: []&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:7;79:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:11;79:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;如果仅指定 data，执行函数则表示获取名为 data 的内存表句柄。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:6;81:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;s.run(&#34;test_t = table(100:0, `ctime`csymbol`price`qty, [TIMESTAMP, SYMBOL, DOUBLE, INT])&#34;) t = s.table(data=&#34;test_t&#34;) print(t, t.tableName()) print(t.toDF())&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:12;88:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;输出结果如下：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:7;90:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;lt;dolphindb.table.Table object at 0x7f11ffb3c070&amp;gt; test_t Empty DataFrame Columns: [ctime, csymbol, price, qty] Index: []&lt;/codeblock&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;tablealiasname&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:5;97:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:5;97:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;tableAliasName&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:5;97:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:13;99:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;如果指定该参数，则加载表时不会使用随机表名作为句柄名称。&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:2;101:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:8;101:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:14;101:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;上传本地变量至服务端时指定该参数。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:8;103:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;data1 = pd.DataFrame({ 'a': [1, 2, 3], 'b': [4, 5, 6], }) t1 = s.table(data=data1, tableAliasName=&#34;data1&#34;) print(t1, t1.tableName()) data2 = { 'a': ['a', 'b', 'c'], 'b': [1, 2, 3], } t2 = s.table(data=data2, tableAliasName=&#34;data2&#34;) print(t2, t2.tableName())&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:15;118:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;输出结果如下：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:9;120:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;lt;dolphindb.table.Table object at 0x7f167ecb69d0&amp;gt; data1 &amp;lt;dolphindb.table.Table object at 0x7f1651d0bc40&amp;gt; data2&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:9;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:16;125:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;获取 DolphinDB 服务端数据库中数据表时指定该参数。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:10;127:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;dbPath = &#34;dfs://testTable&#34; if s.existsDatabase(dbPath): s.dropDatabase(dbPath) db = s.database(partitionType=keys.VALUE, partitions=[1, 2, 3], dbPath=dbPath, engine=&#34;TSDB&#34;) s.run(&#34;schema_t = table(100:0, `ctime`csymbol`price`qty, [TIMESTAMP, SYMBOL, DOUBLE, INT])&#34;) schema_t = s.table(data=&#34;schema_t&#34;) db.createTable(schema_t, &#34;pt&#34;, [&#34;csymbol&#34;]) pt = s.table(dbPath=dbPath, data=&#34;pt&#34;, tableAliasName=&#34;tmp_pt&#34;) print(pt, pt.tableName()) print(pt.toDF())&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:17;140:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;输出结果如下：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:11;142:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;lt;dolphindb.table.Table object at 0x7f3350edc040&amp;gt; tmp_pt Empty DataFrame Columns: [ctime, csymbol, price, qty] Index: []&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:10;149:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:18;149:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;获取 DolphinDB 服务端内存表句柄时指定该参数。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:12;151:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;s.run(&#34;test_t = table(100:0, `ctime`csymbol`price`qty, [TIMESTAMP, SYMBOL, DOUBLE, INT])&#34;) t = s.table(data=&#34;test_t&#34;, tableAliasName=&#34;test_t2&#34;) print(t, t.tableName()) print(t.toDF())&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:19;158:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;输出结果如下：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:13;160:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;lt;dolphindb.table.Table object at 0x7f9fb55b4070&amp;gt; test_t Empty DataFrame Columns: [ctime, csymbol, price, qty] Index: []&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:20;167:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;从上述例子中可以看出，如果加载分区表或上传本地数据时，可以通过指定别名来避免使用临时表名；如果直接使用表名加载数据表句柄，则该参数无效。&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;inmem-partitions&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:6;169:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:6;169:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;inMem, partitions&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:6;169:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:21;171:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;该参数仅在加载磁盘数据库中的数据表时有效，参数详细使用方式请参考 &lt;xref class=&#34;- topic/xref &#34; href=&#34;../../../../funcs/l/loadTable.dita&#34; xtrc=&#34;xref:1;171:34&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;loadTable&lt;/xref&gt;。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;sessionloadtable&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:7;173:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:7;173:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;session.loadTable&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:7;173:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:22;175:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;该函数和 session.table 方法类似，返回值为 Table，但无法上传本地数据，仅能获取 DolphinDB 服务端数据表句柄。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:14;177:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;session.loadTable(tableName, dbPath=None, partitions=None, memoryMode=False)&lt;/codeblock&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:2;181:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:11;181:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:6;181:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;tableName&lt;/b&gt;：内存表名或数据库中数据表表名。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:12;182:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:7;182:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;dbPath&lt;/b&gt;：数据库路径。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:13;183:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:8;183:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;partitions&lt;/b&gt;：将被加载到 DolphinDB 服务端内存中的分区。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:14;184:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:9;184:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;memoryMode&lt;/b&gt;：是否加载表数据到 DolphinDB 服务端内存中。&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;加载内存表&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:8;186:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:8;186:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;加载内存表&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:8;186:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:23;188:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;代码示例如下：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:15;190:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;s.run(&#34;test_t = table(100:0, `ctime`csymbol`price`qty, [TIMESTAMP, SYMBOL, DOUBLE, INT])&#34;) t = s.loadTable(&#34;test_t&#34;) print(t, t.tableName()) print(t.toDF())&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:24;197:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;输出结果如下：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:16;199:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;lt;dolphindb.table.Table object at 0x7fd1c90a4c10&amp;gt; test_t Empty DataFrame Columns: [ctime, csymbol, price, qty] Index: []&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;加载数据库表&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:9;206:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:9;206:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;加载数据库表&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:9;206:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:25;208:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;代码示例如下：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:17;210:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;dbPath = &#34;dfs://testTable&#34; if s.existsDatabase(dbPath): s.dropDatabase(dbPath) db = s.database(partitionType=keys.VALUE, partitions=[1, 2, 3], dbPath=dbPath, engine=&#34;TSDB&#34;) s.run(&#34;schema_t = table(100:0, `ctime`csymbol`price`qty, [TIMESTAMP, SYMBOL, DOUBLE, INT])&#34;) schema_t = s.table(data=&#34;schema_t&#34;) db.createTable(schema_t, &#34;pt&#34;, [&#34;csymbol&#34;]) pt = s.loadTable(&#34;pt&#34;, dbPath=dbPath) print(pt, pt.tableName()) print(pt.toDF())&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:26;223:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;输出结果如下：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:18;225:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;lt;dolphindb.table.Table object at 0x7fdaf7885eb0&amp;gt; pt_TMP_TBL_0dfdc80a Empty DataFrame Columns: [ctime, csymbol, price, qty] Index: []&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;上传的数据表的生命周期&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:10;232:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:10;232:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;上传的数据表的生命周期&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:10;232:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:27;234:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:1;234:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;table&lt;/codeph&gt; 和 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:2;234:11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;loadTable&lt;/codeph&gt; 方法返回一个 Python 本地变量，如果上传一个本地数据对象到服务端，且未指定别名，则使用随机表名作为该变量的句柄名。下例中，上传本地 data 对象到服务端，对应的 Python 本地变量为 t。服务端表名可以通过 Table.tableName 方法获取。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:19;236:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;data = pd.DataFrame({ 'a': [1, 2, 3], 'b': [4, 5, 6], }) t = s.table(data=data) print(t.tableName())&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:28;245:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;数据结果如下：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:20;247:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;TMP_TBL_e03723c9&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:29;251:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;其中 TMP_TBL_ 开头，表示该句柄为临时表的句柄，会随着 Python 端 Table 对象的析构而析构。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:30;253:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;此时释放 DolphinDB 服务端对象有三种方法：&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:3;255:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:15;255:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:31;255:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:3;255:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;undef&lt;/codeph&gt; 方法&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:21;257:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;s.undef(t.tableName(), &#34;VAR&#34;)&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:16;261:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:32;261:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;将服务端对象置空&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:22;263:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;s.run(f&#34;{t.tableName()}=NULL&#34;)&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:17;267:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:33;267:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;析构本地变量以取消本地对象对服务端对象的引用&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:23;269:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;del t&lt;/codeblock&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:34;273:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:10;273:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;注意：&lt;/b&gt; 如果在获取句柄时指定别名，或者获取服务端已存在的非临时表句柄，则 Python 端对象的析构并不会影响服务端数据。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:35;275:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;如果一个表对象只是一次性使用，建议不使用上传机制，可以直接通过函数调用来完成，将表对象作为函数的一个参数。函数调用不会缓存数据。函数调用结束后，所有数据都释放，而且只有一次网络传输，降低网络延迟。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;表操作&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:11;277:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:11;277:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;表操作&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:11;277:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:36;279:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;通过 session.table/session.loadTable 方法获得的对象通常为 Table，API 提供一系列方法用于处理 Table，使得能够在 API 端对表进行操作。例如，调用 select、where等方法执行一次查询；调用 update、delete 等方法更新数据……&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:37;281:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;需要注意的是，调用 update/delete 方法返回的对象并非 Table 类，而是对使用者透明的 TableUpdate/TableDelete 对象，因此，在调用这些方法后，需要执行 execute 方法才能将表数据的更新、修改同步至服务器。详情请参考对应函数的描述以及示例。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:38;283:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;本节将用到 &lt;xref class=&#34;- topic/xref &#34; format=&#34;csv&#34; href=&#34;../../data/example.csv&#34; xtrc=&#34;xref:2;283:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;?ditaot usertext?&gt;example.csv&lt;/xref&gt; 文件。&lt;/p&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;获取表属性&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:12;285:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:12;285:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;获取表属性&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:12;285:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:39;287:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;提供 rows, cols, colNames 和 schema 方法可获取表属性。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:40;289:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;调用 rows/cols 属性可以获取当前表的行数或列数。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:24;291:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;gt;&amp;gt;&amp;gt; s.run(&#34;t = table(1..5 as a, 2..6 as b) &#34;) &amp;gt;&amp;gt;&amp;gt; t = s.table(data=&#34;t&#34;) &amp;gt;&amp;gt;&amp;gt; t.rows 5 &amp;gt;&amp;gt;&amp;gt; t.cols 2&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:41;300:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;调用 colNames 属性可以获取当前表的列名。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:25;302:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;gt;&amp;gt;&amp;gt; t.colNames ['a', 'b']&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:42;307:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;调用 schema 属性返回一个 pd.DataFrame，表示当前表的结构（返回结果与服务端函数 schema 的结果中的 colDefs 属性一致）。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:26;309:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;gt;&amp;gt;&amp;gt; t.schema name typeString typeInt extra comment 0 a INT 4 NaN 1 b INT 4 NaN &lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;select&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:13;316:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:13;316:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;select&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:13;316:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:43;318:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;该方法类似 SQL 语句中的 select 子句，用于选取部分列。下例中使用 toDF 方法获取表对应的 pd.DataFrame 对象，详细使用请参考本文 4.6 toDF 方法。&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:4;320:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:18;320:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:44;320:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;使用一系列的列名作为输入内容。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:27;322:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;gt;&amp;gt;&amp;gt; trade=s.loadText(WORK_DIR+&#34;/example.csv&#34;) &amp;gt;&amp;gt;&amp;gt; trade.select([&#34;ticker&#34;, &#34;date&#34;]).toDF() ticker date 0 AMZN 1997-05-15 1 AMZN 1997-05-16 2 AMZN 1997-05-19 3 AMZN 1997-05-20 4 AMZN 1997-05-21 ...&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:19;334:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:45;334:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;使用字符串作为输入内容。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:28;336:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;gt;&amp;gt;&amp;gt; trade.select(&#34;ticker, date, bid&#34;).toDF() ticker date bid 0 AMZN 1997-05-15 23.50000 1 AMZN 1997-05-16 20.50000 2 AMZN 1997-05-19 20.50000 3 AMZN 1997-05-20 19.62500 4 AMZN 1997-05-21 17.12500 ...&lt;/codeblock&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;update&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:14;347:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:14;347:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;update&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:14;347:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:46;349:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:4;349:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;update&lt;/codeph&gt; 可以更新表，其中 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:5;349:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;cols&lt;/codeph&gt; 表示待更新的列，&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:6;349:37&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;vals&lt;/codeph&gt; 表示待更新的值。需要注意，必须和 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:7;349:61&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;execute&lt;/codeph&gt; 一起使用才能将 Python 端的修改同步至服务端。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:47;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;从下述示例中可以看出，只有执行 execute 后才会将 update 更新的数据同步至服务器。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:29;353:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;gt;&amp;gt;&amp;gt; trade = s.loadText(WORK_DIR+&#34;/example.csv&#34;) &amp;gt;&amp;gt;&amp;gt; t1 = trade.update([&#34;VOL&#34;],[&#34;999999&#34;]).where(&#34;TICKER=`AMZN&#34;).where([&#34;date=2015.12.16&#34;]) &amp;gt;&amp;gt;&amp;gt; t2 = trade.where(&#34;ticker=`AMZN&#34;).where(&#34;date=2015.12.16&#34;) &amp;gt;&amp;gt;&amp;gt; t2.toDF() TICKER date VOL PRC BID ASK 0 AMZN 2015-12-16 3964470 675.77002 675.76001 675.83002 &amp;gt;&amp;gt;&amp;gt; t1 = trade.update([&#34;VOL&#34;],[&#34;999999&#34;]).where(&#34;TICKER=`AMZN&#34;).where([&#34;date=2015.12.16&#34;]).execute() &amp;gt;&amp;gt;&amp;gt; t2.toDF() TICKER date VOL PRC BID ASK 0 AMZN 2015-12-16 999999 675.77002 675.76001 675.83002&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;delete&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:15;366:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:15;366:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;delete&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:15;366:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:48;368:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:8;368:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;delete&lt;/codeph&gt; 可以删除表中的记录，但必须和 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:9;368:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;execute&lt;/codeph&gt; 一起使用才能将 Python 端的修改同步至服务端。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:30;370:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;gt;&amp;gt;&amp;gt; trade = s.loadText(WORK_DIR+&#34;/example.csv&#34;) &amp;gt;&amp;gt;&amp;gt; trade.rows 13136 &amp;gt;&amp;gt;&amp;gt; t = trade.delete().where('date&amp;lt;2013.01.01') &amp;gt;&amp;gt;&amp;gt; trade.rows 13136 &amp;gt;&amp;gt;&amp;gt; t = trade.delete().where('date&amp;lt;2013.01.01').execute() &amp;gt;&amp;gt;&amp;gt; trade.rows 3024&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;groupby&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:16;382:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:16;382:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;groupby&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:16;382:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:49;384:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:10;384:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;groupby&lt;/codeph&gt; 表示根据一定规则进行分组，该方法和 服务端 函数 groupby 一致，调用后，在SQL 中添加 groupby 子句，接收参数为字符串列表或者单个字符串，表示需要分组的列。如果后续追加 having 子句，having子句需包含聚合函数，表示为符合聚合函数条件的每组产生一条记录。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:50;386:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:11;386:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;注：&lt;/b&gt; &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:11;386:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;groupby&lt;/codeph&gt; 后面需要使用聚合函数，如 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:12;386:31&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;count&lt;/codeph&gt;, &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:13;386:40&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;sum&lt;/codeph&gt;, &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:14;386:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;agg&lt;/codeph&gt; 或 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:15;386:55&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;agg2&lt;/codeph&gt; 等。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:51;388:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;准备数据库的脚本如下：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:31;390:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;gt;&amp;gt;&amp;gt; dbPath = &#34;dfs://valuedb&#34; &amp;gt;&amp;gt;&amp;gt; if s.existsDatabase(dbPath): ... s.dropDatabase(dbPath) &amp;gt;&amp;gt;&amp;gt; s.database(dbName='mydb', partitionType=keys.VALUE, partitions=[&#34;AMZN&#34;,&#34;NFLX&#34;,&#34;NVDA&#34;], dbPath=dbPath) &amp;gt;&amp;gt;&amp;gt; trade = s.loadTextEx(dbPath=dbPath, partitionColumns=[&#34;TICKER&#34;], tableName='trade', remoteFilePath=WORK_DIR+&#34;/example.csv&#34;)&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:52;398:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;单独使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:16;398:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;groupby&lt;/codeph&gt;，分别计算每个股票的 vol 总和与 prc 总和：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:32;400:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;gt;&amp;gt;&amp;gt; trade.select(['sum(vol)','sum(prc)']).groupby(['ticker']).toDF() ticker sum_vol sum_prc 0 AMZN 33706396492 772503.81377 1 NFLX 14928048887 421568.81674 2 NVDA 46879603806 127139.51092&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:53;408:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;同时使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:17;408:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;groupby&lt;/codeph&gt; 与 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:18;408:18&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;having&lt;/codeph&gt;：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:33;410:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;gt;&amp;gt;&amp;gt; trade.select('count(ask)').groupby(['vol']).having('count(ask)&amp;gt;1').toDF() vol count_ask 0 579392 2 1 3683504 2 2 5732076 2 3 6299736 2 4 6438038 2 5 6946976 2 6 8160197 2 7 8924303 2&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;contextby&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:17;423:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:17;423:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;contextby&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:17;423:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:54;425:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:19;425:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;contextby&lt;/codeph&gt; 是 DolphinDB 独有的功能，是对标准 SQL 语句的拓展。使用 context by 子句可以简化对时间序列数据的操作。&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:20;425:77&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;contextby&lt;/codeph&gt; 与 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:21;425:91&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;groupby&lt;/codeph&gt; 相似，区别在于 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:22;425:109&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;groupby&lt;/codeph&gt; 为每个组返回一个标量，但是 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:23;425:133&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;contextby&lt;/codeph&gt; 为每个组返回一个向量，且向量的长度与该组的行数相同。详细使用方式请参考 &lt;xref class=&#34;- topic/xref &#34; href=&#34;../../../../progr/sql/contextBy.dita&#34; xtrc=&#34;xref:3;425:181&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;context by&lt;/xref&gt;。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:55;427:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;与 having 子句连用时，如果只与聚合函数一起使用，则结果是符合聚合函数条件的分组，每组记录与输入数据中记录数一致；如果与非聚合函数一起使用，结果是符合指定条件的分组。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:34;429:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;gt;&amp;gt;&amp;gt; trade.contextby('ticker').top(3).toDF() TICKER date VOL PRC BID ASK 0 AMZN 1997-05-15 6029815 23.5000 23.5000 23.6250 1 AMZN 1997-05-16 1232226 20.7500 20.5000 21.0000 2 AMZN 1997-05-19 512070 20.5000 20.5000 20.6250 3 NFLX 2002-05-23 7507079 16.7500 16.7500 16.8500 4 NFLX 2002-05-24 797783 16.9400 16.9400 16.9500 5 NFLX 2002-05-28 474866 16.2000 16.2000 16.3700 6 NVDA 1999-01-22 5702636 19.6875 19.6250 19.6875 7 NVDA 1999-01-25 1074571 21.7500 21.7500 21.8750 8 NVDA 1999-01-26 719199 20.0625 20.0625 20.1250 &amp;gt;&amp;gt;&amp;gt; trade.select(&#34;TICKER, month(date) as month, cumsum(VOL)&#34;).contextby(&#34;TICKER,month(date)&#34;).toDF() TICKER month cumsum_VOL 0 AMZN 1997-05-01 6029815 1 AMZN 1997-05-01 7262041 2 AMZN 1997-05-01 7774111 3 AMZN 1997-05-01 8230468 4 AMZN 1997-05-01 9807882 ...&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:56;451:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:24;451:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;contextby&lt;/codeph&gt; 与 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:25;451:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;having&lt;/codeph&gt; 一起使用：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:35;453:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;gt;&amp;gt;&amp;gt; trade.contextby('ticker').having(&#34;sum(VOL)&amp;gt;40000000000&#34;).toDF() TICKER date VOL PRC BID ASK 0 NVDA 1999-01-22 5702636 19.6875 19.6250 19.6875 1 NVDA 1999-01-25 1074571 21.7500 21.7500 21.8750 2 NVDA 1999-01-26 719199 20.0625 20.0625 20.1250 3 NVDA 1999-01-27 510637 20.0000 19.8750 20.0000 4 NVDA 1999-01-28 476094 19.9375 19.8750 20.0000 ...&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;pivotby&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:18;464:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:18;464:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;pivotby&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:18;464:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:57;466:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:26;466:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;pivotby&lt;/codeph&gt; 是 DolphinDB 的独有功能，是对标准 SQL 语句的拓展。它将表中一列或多列的内容按照两个维度重新排列，亦可配合数据转换函数使用。详细使用请参考 &lt;xref class=&#34;- topic/xref &#34; href=&#34;../../../../progr/sql/pivotBy.dita&#34; xtrc=&#34;xref:4;466:88&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;pivotby&lt;/xref&gt;。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:58;468:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:27;468:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;pivotby&lt;/codeph&gt; 与 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:28;468:13&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;select&lt;/codeph&gt; 子句一起使用时返回一个表。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:36;470:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;gt;&amp;gt;&amp;gt; trade = s.table(&#34;dfs://valuedb&#34;, &#34;trade&#34;) &amp;gt;&amp;gt;&amp;gt; t1 = trade.select(&#34;VOL&#34;).pivotby(&#34;TICKER&#34;, &#34;date&#34;) &amp;gt;&amp;gt;&amp;gt; t1.toDF() TICKER 1997.05.15 1997.05.16 ... 2016.12.28 2016.12.29 2016.12.30 0 AMZN 6029815.0 1232226.0 ... 3301025 3158299 4139451 1 NFLX NaN NaN ... 4388956 3444729 4455012 2 NVDA NaN NaN ... 57384116 54384676 30323259&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:59;480:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:29;480:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;pivotby&lt;/codeph&gt; 和 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:30;480:13&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;exec&lt;/codeph&gt; 语句一起使用时返回一个 DolphinDB 的矩阵对象。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:37;482:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;gt;&amp;gt;&amp;gt; trade.exec(&#34;VOL&#34;).pivotby(&#34;TICKER&#34;, &#34;date&#34;).toDF() [array([[ 6029815., 1232226., 512070., ..., 3301025., 3158299., 4139451.], [ nan, nan, nan, ..., 4388956., 3444729., 4455012.], [ nan, nan, nan, ..., 57384116., 54384676., 30323259.]]), array(['AMZN', 'NFLX', 'NVDA'], dtype=object), array(['1997-05-15T00:00:00.000000000', '1997-05-16T00:00:00.000000000', '1997-05-19T00:00:00.000000000', ..., '2016-12-28T00:00:00.000000000', '2016-12-29T00:00:00.000000000', '2016-12-30T00:00:00.000000000'], dtype='datetime64[ns]')]&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;sort-csort&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:19;495:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:19;495:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;sort, csort&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:19;495:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:60;497:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;可使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:31;497:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;csort&lt;/codeph&gt; 关键字排序。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:38;499:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;gt;&amp;gt;&amp;gt; trade = s.loadTable(&#34;trade&#34;, &#34;dfs://valuedb&#34;) &amp;gt;&amp;gt;&amp;gt; trade.contextby('ticker').csort('date desc').toDF() TICKER date VOL PRC BID ASK 0 AMZN 2016-12-30 4139451 749.87000 750.02002 750.40002 1 AMZN 2016-12-29 3158299 765.15002 764.66998 765.15997 2 AMZN 2016-12-28 3301025 772.13000 771.92999 772.15997 3 AMZN 2016-12-27 2638725 771.40002 771.40002 771.76001 4 AMZN 2016-12-23 1981616 760.59003 760.33002 760.59003 ...&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:61;511:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;除了在排序函数 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:32;511:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;sort&lt;/codeph&gt; 和 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:33;511:18&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;csort&lt;/codeph&gt; 中指定 asc 和 desc 关键字来决定排序顺序外，也可以通过传参的方式实现。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:39;513:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;sort(by, ascending=True) csort(by, ascending=True)&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:62;518:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;参数 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:1;518:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;ascending&lt;/i&gt; 表示是否进行升序排序，默认值为 True。可以通过传入一个 list 来定义多列的不同排序方式。如以下脚本：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:40;520:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;gt;&amp;gt;&amp;gt; trade.select(&#34;*&#34;).contextby('ticker').csort([&#34;TICKER&#34;, &#34;VOL&#34;], True).limit(5).toDF() TICKER date VOL PRC BID ASK 0 AMZN 1997-12-26 40721 54.2500 53.8750 54.625 1 AMZN 1997-08-12 47939 26.3750 26.3750 26.750 2 AMZN 1997-07-21 48325 26.1875 26.1250 26.250 3 AMZN 1997-08-13 49690 26.3750 26.0000 26.625 4 AMZN 1997-06-02 49764 18.1250 18.1250 18.375 5 NFLX 2002-09-05 20725 12.8500 12.8500 12.950 6 NFLX 2002-11-11 26824 8.4100 8.3000 8.400 7 NFLX 2002-09-04 27319 13.0000 12.8200 13.000 8 NFLX 2002-06-10 35421 16.1910 16.1900 16.300 9 NFLX 2002-09-06 54951 12.8000 12.7900 12.800 10 NVDA 1999-05-10 41250 17.5000 17.5000 17.750 11 NVDA 1999-05-07 52310 17.5000 17.3750 17.625 12 NVDA 1999-05-14 59807 18.0000 17.7500 18.000 13 NVDA 1999-04-01 63997 20.5000 20.1875 20.500 14 NVDA 1999-04-19 65940 19.0000 19.0000 19.125 &amp;gt;&amp;gt;&amp;gt; trade.select(&#34;*&#34;).contextby('ticker').csort([&#34;TICKER&#34;, &#34;VOL&#34;], [True, False]).limit(5).toDF() TICKER date VOL PRC BID ASK 0 AMZN 2007-04-25 104463043 56.8100 56.80 56.8100 1 AMZN 1999-09-29 80380734 80.7500 80.75 80.8125 2 AMZN 2006-07-26 76996899 26.2600 26.17 26.1800 3 AMZN 2007-04-26 62451660 62.7810 62.77 62.8300 4 AMZN 2005-02-03 60580703 35.7500 35.74 35.7300 5 NFLX 2015-07-16 63461015 115.8100 115.85 115.8600 6 NFLX 2015-08-24 59952448 96.8800 96.85 96.8800 7 NFLX 2016-04-19 55728765 94.3400 94.30 94.3100 8 NFLX 2016-07-19 55685209 85.8400 85.81 85.8300 9 NFLX 2016-01-20 53009419 107.7400 107.73 107.7800 10 NVDA 2011-01-06 87693472 19.3300 19.33 19.3400 11 NVDA 2011-02-17 87117555 25.6800 25.68 25.7000 12 NVDA 2011-01-12 86197484 23.3525 23.34 23.3600 13 NVDA 2011-08-12 80488616 12.8800 12.86 12.8700 14 NVDA 2003-05-09 77604776 21.3700 21.39 21.3700&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;top-limit&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:20;557:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:20;557:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;top, limit&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:20;557:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:63;559:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;top 用于取表中的前 n 条记录。详细使用请参考 &lt;xref class=&#34;- topic/xref &#34; href=&#34;../../../../progr/sql/top.dita&#34; xtrc=&#34;xref:5;559:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;top&lt;/xref&gt;。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:41;561:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;gt;&amp;gt;&amp;gt; trade = s.table(&#34;dfs://valuedb&#34;, &#34;trade&#34;) &amp;gt;&amp;gt;&amp;gt; trade.top(5).toDF() TICKER date VOL PRC BID ASK 0 AMZN 1997-05-15 6029815 23.500 23.500 23.625 1 AMZN 1997-05-16 1232226 20.750 20.500 21.000 2 AMZN 1997-05-19 512070 20.500 20.500 20.625 3 AMZN 1997-05-20 456357 19.625 19.625 19.750 4 AMZN 1997-05-21 1577414 17.125 17.125 17.250&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:64;572:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;limit 子句和 top 子句功能类似。两者的区别在于：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:3;574:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:20;574:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;top 子句中的整型常量不能为负数。在与 context by 子句一同使用时，limit 子句的标量值可以为负整数，返回每个组最后指定数目的记录。其他情况 limit 子句标量值为非负整数。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:21;575:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;可使用 limit 子句从某行开始选择一定数量的行。&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:65;577:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;limit 的详细使用请参考 &lt;xref class=&#34;- topic/xref &#34; href=&#34;../../../../progr/sql/limit.dita&#34; xtrc=&#34;xref:6;577:16&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;limit&lt;/xref&gt;。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:42;579:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;gt;&amp;gt;&amp;gt; trade.select(&#34;*&#34;).contextby('ticker').limit(-2).toDF() TICKER date VOL PRC BID ASK 0 AMZN 2016-12-29 3158299 765.15002 764.66998 765.15997 1 AMZN 2016-12-30 4139451 749.87000 750.02002 750.40002 2 NFLX 2016-12-29 3444729 125.33000 125.31000 125.33000 3 NFLX 2016-12-30 4455012 123.80000 123.80000 123.83000 4 NVDA 2016-12-29 54384676 111.43000 111.26000 111.42000 5 NVDA 2016-12-30 30323259 106.74000 106.73000 106.75000&lt;/codeblock&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:43;590:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;gt;&amp;gt;&amp;gt; trade.select(&#34;*&#34;).limit([2, 5]).toDF() TICKER date VOL PRC BID ASK 0 AMZN 1997-05-19 512070 20.500 20.500 20.625 1 AMZN 1997-05-20 456357 19.625 19.625 19.750 2 AMZN 1997-05-21 1577414 17.125 17.125 17.250 3 AMZN 1997-05-22 983855 16.750 16.625 16.750 4 AMZN 1997-05-23 1330026 18.000 18.000 18.125&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;merge-merge-asof-merge-window-和-merge-cross&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:21;600:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:21;600:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;merge, merge_asof, merge_window 和 merge_cross&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:21;600:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:66;602:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;merge 用于内部连接、左连接、左半连接和外部连接，merge_asof 为 asof join，merge_window 为窗口连接。&lt;/p&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;merge&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:22;604:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:22;604:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;merge&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:22;604:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:67;606:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;merge 的参数包括两个索引列和一个字符串参数。如果两个连接列的名称相同，则使用 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:2;606:43&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;on&lt;/i&gt; 参数指定连接列；如果两个连接列的名称不同，使用 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:3;606:72&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;left_on&lt;/i&gt; 和 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:4;606:84&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;right_on&lt;/i&gt; 参数指定连接列。可选参数 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:5;606:108&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;how&lt;/i&gt; 表示表连接的类型，默认的连接类型为内部连接。&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:5;608:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:22;608:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:68;608:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;当连接列名称相同时，使用示例如下：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:44;610:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;gt;&amp;gt;&amp;gt; trade = s.table(&#34;dfs://valuedb&#34;, &#34;trade&#34;) &amp;gt;&amp;gt;&amp;gt; t1 = s.table(data={ ... 'TICKER': ['AMZN', 'AMZN', 'AMZN'], ... 'date': np.array(['2015-12-31', '2015-12-30', '2015-12-29'], dtype='datetime64[D]'), ... 'open': [695, 685, 674], ... }) ... &amp;gt;&amp;gt;&amp;gt; t1 = t1.select(&#34;TICKER, date(date) as date, open&#34;) &amp;gt;&amp;gt;&amp;gt; trade.merge(t1,on=[&#34;TICKER&#34;,&#34;date&#34;]).toDF() TICKER date VOL PRC BID ASK open 0 AMZN 2015-12-29 5734996 693.96997 693.96997 694.20001 674 1 AMZN 2015-12-30 3519303 689.07001 689.07001 689.09998 685 2 AMZN 2015-12-31 3749860 675.89001 675.85999 675.94000 695&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:23;626:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:69;626:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;当连接列名称不相同时，需要指定 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:6;626:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;left_on&lt;/i&gt; 参数和 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:7;626:34&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;right_on&lt;/i&gt; 参数：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:45;628:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;gt;&amp;gt;&amp;gt; trade = s.table(&#34;dfs://valuedb&#34;, &#34;trade&#34;) &amp;gt;&amp;gt;&amp;gt; t1 = s.table(data={ ... 'TICKER': ['AMZN', 'AMZN', 'AMZN'], ... 'date': np.array(['2015-12-31', '2015-12-30', '2015-12-29'], dtype='datetime64[D]'), ... 'open': [695, 685, 674], ... }) ... &amp;gt;&amp;gt;&amp;gt; t1 = t1.select(&#34;TICKER as TICKER1, date(date) as date1, open&#34;) &amp;gt;&amp;gt;&amp;gt; trade.merge(t1, left_on=[&#34;TICKER&#34;,&#34;date&#34;], right_on=[&#34;TICKER1&#34;, &#34;date1&#34;]).toDF() TICKER date VOL PRC BID ASK open 0 AMZN 2015-12-29 5734996 693.96997 693.96997 694.20001 674 1 AMZN 2015-12-30 3519303 689.07001 689.07001 689.09998 685 2 AMZN 2015-12-31 3749860 675.89001 675.85999 675.94000 695&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:24;644:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:70;644:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;当要选择左连接时，把 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:8;644:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;how&lt;/i&gt; 参数设置为 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:34;644:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;left&lt;/codeph&gt;：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:46;646:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;gt;&amp;gt;&amp;gt; trade = s.table(&#34;dfs://valuedb&#34;, &#34;trade&#34;) &amp;gt;&amp;gt;&amp;gt; t1 = s.table(data={ ... 'TICKER': ['AMZN', 'AMZN', 'AMZN'], ... 'date': np.array(['2015-12-31', '2015-12-30', '2015-12-29'], dtype='datetime64[D]'), ... 'open': [695, 685, 674], ... }) ... &amp;gt;&amp;gt;&amp;gt; t1 = t1.select(&#34;TICKER, date(date) as date, open&#34;) &amp;gt;&amp;gt;&amp;gt; trade.merge(t1,how=&#34;left&#34;, on=[&#34;TICKER&#34;,&#34;date&#34;]).where('TICKER=`AMZN').where('2015.12.23&amp;lt;=date&amp;lt;=2015.12.31').toDF() TICKER date VOL PRC BID ASK open 0 AMZN 2015-12-23 2722922 663.70001 663.48999 663.71002 NaN 1 AMZN 2015-12-24 1092980 662.78998 662.56000 662.79999 NaN 2 AMZN 2015-12-28 3783555 675.20001 675.00000 675.21002 NaN 3 AMZN 2015-12-29 5734996 693.96997 693.96997 694.20001 674.0 4 AMZN 2015-12-30 3519303 689.07001 689.07001 689.09998 685.0 5 AMZN 2015-12-31 3749860 675.89001 675.85999 675.94000 695.0&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:25;665:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:71;665:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;当要选择外部连接时，把 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:9;665:16&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;how&lt;/i&gt; 参数设置为 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:35;665:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;outer&lt;/codeph&gt;：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:47;667:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;gt;&amp;gt;&amp;gt; t1 = s.table(data={'TICKER': ['AMZN', 'AMZN', 'NFLX'], 'date': ['2015.12.29', '2015.12.30', '2015.12.31'], 'open': [674, 685, 942]}) &amp;gt;&amp;gt;&amp;gt; t2 = s.table(data={'TICKER': ['AMZN', 'NFLX', 'NFLX'], 'date': ['2015.12.29', '2015.12.30', '2015.12.31'], 'close': [690, 936, 951]}) &amp;gt;&amp;gt;&amp;gt; t1.merge(t2, how=&#34;outer&#34;, on=[&#34;TICKER&#34;,&#34;date&#34;]).toDF() TICKER date open tmp_TICKER tmp_date close 0 AMZN 2015.12.29 674.0 AMZN 2015.12.29 690.0 1 AMZN 2015.12.30 685.0 NaN 2 NFLX 2015.12.31 942.0 NFLX 2015.12.31 951.0 3 NaN NFLX 2015.12.30 936.0&lt;/codeblock&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:72;678:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:12;678:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;注意：&lt;/b&gt; 分区表只能与分区表进行外部连接，内存表只能与内存表进行外部连接。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;merge-asof&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:23;680:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:23;680:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;merge_asof&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:23;680:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:73;682:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;merge_asof 对应 DolphinDB 中的 &lt;xref class=&#34;- topic/xref &#34; href=&#34;../../../../progr/sql/asofjoin.dita&#34; xtrc=&#34;xref:7;682:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;asof join (aj)&lt;/xref&gt;。asof join 与 left join 非常相似，主要有以下区别：&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:6;684:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:26;684:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:74;684:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;asof join 的最后一个连接列通常是时间类型。对于左表中某行的时间 t，在右表最后一个连接列之外的其它连接列一致的记录中，如果右表没有与 t 对应的时间，asof join 会取右表中 t 之前的最近时间对应的记录；如果有多个相同的时间，会取最后一个时间对应的记录。&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:27;686:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:75;686:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;如果只有一个连接列，右表必须按照连接列排好序。如果有多个连接列，右表必须在其它连接列决定的每个组内根据最后一个连接列排好序。如果右表不满足这些条件，计算结果将会不符合预期。右表不需要按照其他连接列排序，左表不需要排序。&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:76;688:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;本节与下节的例子使用了 &lt;xref class=&#34;- topic/xref &#34; format=&#34;csv&#34; href=&#34;../../data/trades.csv&#34; xtrc=&#34;xref:8;688:13&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;?ditaot usertext?&gt;trades.csv&lt;/xref&gt; 和 &lt;xref class=&#34;- topic/xref &#34; format=&#34;csv&#34; href=&#34;../../data/quotes.csv&#34; xtrc=&#34;xref:9;688:51&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;?ditaot usertext?&gt;quotes.csv&lt;/xref&gt;，它们含有 NYSE 网站下载的 AAPL 和 FB 的 2016 年 10 月 24 日的交易与报价数据。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:48;690:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;gt;&amp;gt;&amp;gt; dbPath = &#34;dfs://tickDB&#34; &amp;gt;&amp;gt;&amp;gt; if s.existsDatabase(dbPath): ... s.dropDatabase(dbPath) ... &amp;gt;&amp;gt;&amp;gt; s.database(partitionType=keys.VALUE, partitions=[&#34;AAPL&#34;,&#34;FB&#34;], dbPath=dbPath) &amp;gt;&amp;gt;&amp;gt; trades = s.loadTextEx(dbPath, tableName='trades', partitionColumns=[&#34;Symbol&#34;], remoteFilePath=WORK_DIR+&#34;/trades.csv&#34;) &amp;gt;&amp;gt;&amp;gt; quotes = s.loadTextEx(dbPath, tableName='quotes', partitionColumns=[&#34;Symbol&#34;], remoteFilePath=WORK_DIR+&#34;/quotes.csv&#34;) &amp;gt;&amp;gt;&amp;gt; trades.top(5).toDF() Time Exchange Symbol Trade_Volume Trade_Price 0 1970-01-01 08:00:00.022239 75 AAPL 300 27.00 1 1970-01-01 08:00:00.022287 75 AAPL 500 27.25 2 1970-01-01 08:00:00.022317 75 AAPL 335 27.26 3 1970-01-01 08:00:00.022341 75 AAPL 100 27.27 4 1970-01-01 08:00:00.022368 75 AAPL 31 27.40 &amp;gt;&amp;gt;&amp;gt; quotes.where(&#34;second(Time)&amp;gt;=09:29:59&#34;).top(5).toDF() Time Exchange Symbol Bid_Price Bid_Size Offer_Price Offer_Size 0 1970-01-01 09:30:00.005868 90 AAPL 26.89 1 27.10 6 1 1970-01-01 09:30:00.011058 90 AAPL 26.89 11 27.10 6 2 1970-01-01 09:30:00.031523 90 AAPL 26.89 13 27.10 6 3 1970-01-01 09:30:00.284623 80 AAPL 26.89 8 26.98 8 4 1970-01-01 09:30:00.454066 80 AAPL 26.89 8 26.98 1 &amp;gt;&amp;gt;&amp;gt; trades.merge_asof(quotes,on=[&#34;Symbol&#34;,&#34;Time&#34;]).select([&#34;Symbol&#34;,&#34;Time&#34;,&#34;Trade_Volume&#34;,&#34;Trade_Price&#34;,&#34;Bid_Price&#34;, &#34;Bid_Size&#34;,&#34;Offer_Price&#34;, &#34;Offer_Size&#34;]).top(5).toDF() Symbol Time Trade_Volume Trade_Price Bid_Price Bid_Size \ 0 AAPL 1970-01-01 08:00:00.022239 300 27.00 26.9 1 1 AAPL 1970-01-01 08:00:00.022287 500 27.25 26.9 1 2 AAPL 1970-01-01 08:00:00.022317 335 27.26 26.9 1 3 AAPL 1970-01-01 08:00:00.022341 100 27.27 26.9 1 4 AAPL 1970-01-01 08:00:00.022368 31 27.40 26.9 1 Offer_Price Offer_Size 0 27.49 10 1 27.49 10 2 27.49 10 3 27.49 10 4 27.49 10&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;merge-window&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:24;728:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:24;728:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;merge_window&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:24;728:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:77;730:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:36;730:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;merge_window&lt;/codeph&gt; 对应 DolphinDB 中的 &lt;xref class=&#34;- topic/xref &#34; href=&#34;../../../../progr/sql/windowjoin.dita&#34; xtrc=&#34;xref:10;730:32&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;window join(wj)&lt;/xref&gt;，它是 asof join 的扩展。&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:10;730:106&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;leftBound&lt;/i&gt; 参数和 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:11;730:122&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;rightBound&lt;/i&gt; 参数用于指定窗口的边界 w1 和 w2，对左表中最后一个连接列对应的时间为 t 的记录，在右表中选择 (t+w1) 到 (t+w2) 的时间并且其他连接列匹配的记录，然后对这些记录使用指定的聚合函数。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:78;732:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;window join 和 prevailing window join 的唯一区别是，如果右表中没有与窗口左边界时间（即 t+w1）匹配的值，prevailing window join 会选择右表中 (t+w1) 之前的最近时间的记录作为 t+w1 时的记录。如果要使用 prevailing window join，需将 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:12;732:165&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;prevailing&lt;/i&gt; 参数设置为 True。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:49;734:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;gt;&amp;gt;&amp;gt; trades.merge_window(quotes, -5000000000, 0, aggFunctions=[&#34;avg(Bid_Price)&#34;,&#34;avg(Offer_Price)&#34;], on=[&#34;Symbol&#34;,&#34;Time&#34;]).where(&#34;Time&amp;gt;=07:59:59&#34;).top(10).toDF() Time Exchange Symbol Trade_Volume Trade_Price avg_Bid_Price avg_Offer_Price 0 1970-01-01 08:00:00.022239 75 AAPL 300 27.00 26.90 27.49 1 1970-01-01 08:00:00.022287 75 AAPL 500 27.25 26.90 27.49 2 1970-01-01 08:00:00.022317 75 AAPL 335 27.26 26.90 27.49 3 1970-01-01 08:00:00.022341 75 AAPL 100 27.27 26.90 27.49 4 1970-01-01 08:00:00.022368 75 AAPL 31 27.40 26.90 27.49 5 1970-01-01 08:00:02.668076 68 AAPL 2434 27.42 26.75 27.36 6 1970-01-01 08:02:20.116025 68 AAPL 66 27.00 NaN NaN 7 1970-01-01 08:06:31.149930 75 AAPL 100 27.25 NaN NaN 8 1970-01-01 08:06:32.826399 75 AAPL 100 27.25 NaN NaN 9 1970-01-01 08:06:33.168833 75 AAPL 74 27.25 NaN NaN [10 rows x 6 columns]&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;merge-cross&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:25;751:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:25;751:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;merge_cross&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:25;751:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:79;753:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:37;753:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;merge_cross&lt;/codeph&gt; 对应 DolphinDB 中的 &lt;xref class=&#34;- topic/xref &#34; href=&#34;../../../../progr/sql/crossjoin.dita&#34; xtrc=&#34;xref:11;753:31&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;cross join&lt;/xref&gt;。交叉连接函数返回两张表的笛卡尔积的结果集。如果左表有 n 行，右表有 m 行，那么笛卡尔积结果集包含 n*m 行。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:50;755:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;gt;&amp;gt;&amp;gt; s.run(&#34;&#34;&#34; ... t1 = table(2010 2011 2012 as year); ... t2 = table(`IBM`C`AAPL as Ticker); ... &#34;&#34;&#34;) ... &amp;gt;&amp;gt;&amp;gt; t1 = s.table(data=&#34;t1&#34;) &amp;gt;&amp;gt;&amp;gt; t2 = s.table(data=&#34;t2&#34;) &amp;gt;&amp;gt;&amp;gt; t1.merge_cross(t2).toDF() year Ticker 0 2010 IBM 1 2010 C 2 2010 AAPL 3 2011 IBM 4 2011 C 5 2011 AAPL 6 2012 IBM 7 2012 C 8 2012 AAPL&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;rename&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:26;776:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:26;776:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;rename&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:26;776:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:80;778:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;调用该函数可以给表重新设置名称。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:51;780:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;gt;&amp;gt;&amp;gt; t.tableName() t &amp;gt;&amp;gt;&amp;gt; t.rename(&#34;xx&#34;) &amp;gt;&amp;gt;&amp;gt; t.tableName() xx&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:81;788:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:13;788:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;注意：&lt;/b&gt; 如果给临时表重新设置名称，会导致临时表无法被及时析构，导致内存泄漏。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;drop&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:27;790:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:27;790:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;drop&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:27;790:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:82;792:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;调用该函数可以删除表的指定元素。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:52;794:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;gt;&amp;gt;&amp;gt; trade = s.loadText(WORK_DIR+&#34;/example.csv&#34;) &amp;gt;&amp;gt;&amp;gt; trade.colNames ['TICKER', 'date', 'VOL', 'PRC', 'BID', 'ASK'] &amp;gt;&amp;gt;&amp;gt; t1 = trade.drop(['ask', 'bid']) &amp;gt;&amp;gt;&amp;gt; t1.colNames ['TICKER', 'date', 'VOL', 'PRC']&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;exec&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:28;803:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:28;803:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;exec&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:28;803:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:83;805:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;由于使用 select 子句总是生成一张表，即使只选择一列数据亦是如此。若需要生成一个标量或者一个向量，建议使用 exec 子句。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:84;807:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:38;807:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;exec&lt;/codeph&gt; 只选择一列时将生成一个 DolphinDB 的向量。在 Python 中使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:39;807:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;toDF()&lt;/codeph&gt; 加载该对象，可以打印出一个 np.ndarray 对象：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:53;809:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;gt;&amp;gt;&amp;gt; trade = s.loadText(WORK_DIR+&#34;/example.csv&#34;) &amp;gt;&amp;gt;&amp;gt; trade.exec(&#34;ticker&#34;).toDF() ['AMZN' 'AMZN' 'AMZN' ... 'NFLX' 'NFLX' 'NFLX']&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:85;815:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;如果 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:40;815:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;exec&lt;/codeph&gt; 语句选择了多列，则结果和 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:41;815:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;select&lt;/codeph&gt; 语句一致，将生成一个 DolphinDB 的 table 类型。在 Python 中使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:42;815:78&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;toDF()&lt;/codeph&gt; 加载该对象，可以打印出一个 pd.DataFrame 对象：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:54;817:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;gt;&amp;gt;&amp;gt; trade.exec([&#34;ticker&#34;, &#34;date&#34;, &#34;bid&#34;]).toDF() ticker date bid 0 AMZN 1997-05-15 23.50000 1 AMZN 1997-05-16 20.50000 2 AMZN 1997-05-19 20.50000 3 AMZN 1997-05-20 19.62500 4 AMZN 1997-05-21 17.12500 ...&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;where&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:29;828:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:29;828:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;where&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:29;828:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:86;830:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:43;830:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;where&lt;/codeph&gt; 子句用于过滤数据。&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:7;832:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:28;832:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:87;832:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;多个过滤条件&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:88;834:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;where 子句在使用时，如果指定了多个过滤条件，则各个条件之间默认使用 and 连接；如果需要以 or 来连接过滤条件，则需要将 or 连接的条件作为一个条件传入 where 方法。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:89;836:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:14;836:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;注：&lt;/b&gt; 1.30.21.2 及之前版本的 API，在添加多个 where 子句时，不会使用括号保证运算优先级，因此，使用时需在筛选条件外添加括号，以保证运算正确性。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:55;838:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;gt;&amp;gt;&amp;gt; trade = s.loadText(WORK_DIR+&#34;/example.csv&#34;) &amp;gt;&amp;gt;&amp;gt; t1 = trade.select(['date','bid','ask','prc','vol']).where('TICKER=`AMZN').where('bid!=NULL').where('ask!=NULL').where('vol&amp;gt;10000000') &amp;gt;&amp;gt;&amp;gt; t1.toDF() date bid ask prc vol 0 1998-09-01 79.93750 80.25000 79.95313 11321844 1 1998-11-17 148.68750 149.00000 148.50000 10279448 2 1998-11-20 179.62500 179.75000 180.62500 11314228 3 1998-11-23 217.75000 217.81250 218.00000 11559042 4 1998-11-24 214.25000 214.62500 214.50000 13820992 ... &amp;gt;&amp;gt;&amp;gt; t1.rows 765 &amp;gt;&amp;gt;&amp;gt; t1.showSQL() select date,bid,ask,prc,vol from TMP_TBL_2744917d where (TICKER=`AMZN) and (bid!=NULL) and (ask!=NULL) and (vol&amp;gt;10000000)&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:29;855:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:90;855:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;输入内容为字符串&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:91;857:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:44;857:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;where&lt;/codeph&gt; 的输入内容可以是包含多个条件的字符串。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:56;859:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;gt;&amp;gt;&amp;gt; t1 = trade.select(&#34;ticker, date, vol&#34;).where(&#34;bid!=NULL, ask!=NULL, vol&amp;gt;50000000&#34;) &amp;gt;&amp;gt;&amp;gt; t1.toDF() ticker date vol 0 AMZN 1999-09-29 80380734 1 AMZN 2000-06-23 52221978 2 AMZN 2001-11-26 51543686 3 AMZN 2002-01-22 57235489 4 AMZN 2005-02-03 60580703 ... &amp;gt;&amp;gt;&amp;gt; t1.rows 41&lt;/codeblock&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;execute&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:30;873:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:30;873:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;execute&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:30;873:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:8;875:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:30;875:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:92;875:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;Table 类中，该方法表示以 exec 方式选取传入列的数据，传入参数 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:45;875:41&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;expr&lt;/codeph&gt; 为字符串或字符串列表，表示选取的列。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:57;877:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;gt;&amp;gt;&amp;gt; trade = s.loadText(WORK_DIR+&#34;/example.csv&#34;) &amp;gt;&amp;gt;&amp;gt; trade.execute(&#34;TICKER&#34;) ['AMZN' 'AMZN' 'AMZN' ... 'NFLX' 'NFLX' 'NFLX'] &amp;gt;&amp;gt;&amp;gt; trade.execute([&#34;VOL&#34;, &#34;PRC&#34;]) VOL PRC 0 6029815 23.50000 1 1232226 20.75000 2 512070 20.50000 3 456357 19.62500 4 1577414 17.12500 ... ... ... 13131 2010120 125.59000 13132 5287520 128.35001 13133 4388956 125.89000 13134 3444729 125.33000 13135 4455012 123.80000 [13136 rows x 2 columns]&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:31;898:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:93;898:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;如果对 Table 类对象执行 update/delete 操作后，必须执行 execute 才能确保在服务端正确执行，此时无需传入参数，也不会以 exec 的形式执行，仅将修改语句提交至服务端执行，并返回一个 Table 对象作为结果。&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;executeas&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:31;900:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:31;900:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;executeAs&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:31;900:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:94;902:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:46;902:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;executeAs&lt;/codeph&gt; 可以把结果保存为 server 端的表对象，表名由参数 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:13;902:41&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;newTableName&lt;/i&gt; 指定，执行后将返回一个 Table 对象管理新创建的表。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:95;904:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:15;904:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;注意：&lt;/b&gt; 通过执行该方法创建的表，其生存周期不受 Python 端控制，而是与 session 的生存周期保持一致。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:58;906:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;gt;&amp;gt;&amp;gt; trade = s.loadText(WORK_DIR+&#34;/example.csv&#34;) &amp;gt;&amp;gt;&amp;gt; t1 = trade.select(['date','bid','ask','prc','vol']).where('TICKER=`AMZN').where('bid!=NULL').where('ask!=NULL').where('vol&amp;gt;10000000').executeAs(&#34;AMZN&#34;) &amp;gt;&amp;gt;&amp;gt; t1.tableName() AMZN&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;showsql&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:32;913:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:32;913:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;showSQL&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:32;913:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:96;915:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;可以使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:47;915:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;showSQL&lt;/codeph&gt; 展示 SQL 语句。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;python&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:59;917:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&amp;gt;&amp;gt;&amp;gt; trade=s.loadText(WORK_DIR+&#34;/example.csv&#34;) &amp;gt;&amp;gt;&amp;gt; trade.select([&#34;ticker&#34;, &#34;date&#34;]).showSQL() select ticker,date from TMP_TBL_fb11c541&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;todf-tolist&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:33;923:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:33;923:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;toDF, toList&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:33;923:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:97;925:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;toDF 和 toList 功能类似，都是执行缓存在 Python 端的 SQL 语句（可通过 showSQL 方法获取），并返回执行结果。两者的区别在于，toDF 与 session.run(sql) 一致，toList 则与 session.run(sql, pickleTableToList=True) 行为一致。session 在构造时，如果指定 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:48;925:180&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34;&gt;protocol=PROTOCOL_PICKLE/PROTOCOL_DDB&lt;/codeph&gt;，则 toDF 将返回一个 pd.DataFrame，toList 返回一个由 np.ndarray 构成的 list，每个 np.ndarray 表示表中的一列。详细区别请参考章节 &lt;xref class=&#34;- topic/xref &#34; dita-ot:orig-format=&#34;md&#34; format=&#34;dita&#34; href=&#34;../DataTypeCasting/PROTOCOL_DDB.md&#34; xtrc=&#34;xref:12;925:311&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;PROTOCOL_DDB&lt;/xref&gt; 和 &lt;xref class=&#34;- topic/xref &#34; dita-ot:orig-format=&#34;md&#34; format=&#34;dita&#34; href=&#34;../DataTypeCasting/PROTOCOL_PICKLE.md&#34; xtrc=&#34;xref:13;925:364&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;PROTOCOL_PICKLE&lt;/xref&gt;。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;/topic&gt;"/><meta name="wh-source-relpath" content="api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.md"/><meta name="wh-out-relpath" content="api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.html"/>

    <link rel="stylesheet" type="text/css" href="../../../../oxygen-webhelp/app/commons.css?buildId=2024012323"/>
    <link rel="stylesheet" type="text/css" href="../../../../oxygen-webhelp/app/topic.css?buildId=2024012323"/>

    <script src="../../../../oxygen-webhelp/app/options/properties.js?buildId=20240704100525"></script>
    <script src="../../../../oxygen-webhelp/app/localization/strings.js?buildId=2024012323"></script>
    <script src="../../../../oxygen-webhelp/app/search/index/keywords.js?buildId=20240704100525"></script>
    <script defer="defer" src="../../../../oxygen-webhelp/app/commons.js?buildId=2024012323"></script>
    <script defer="defer" src="../../../../oxygen-webhelp/app/topic.js?buildId=2024012323"></script>
<link rel="stylesheet" type="text/css" href="../../../../oxygen-webhelp/template/styles.css?buildId=2024012323"/><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script></head>

    <body id="table" class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="sr-only sr-only-focusable">
            跳转到主要内容
        </a>
        
        
        
        
        <header class="navbar navbar-default wh_header">
    <div class="container-fluid">
        <div xmlns:whc="http://www.oxygenxml.com/webhelp/components" class="wh_header_flex_container navbar-nav navbar-expand-md navbar-dark">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <a href="https://www.dolphindb.cn" class=" wh_logo d-none d-sm-block "><img src="../../../../logo.png" alt="  DolphinDB 文档中心  "/></a>
                    <div class=" wh_publication_title "><a href="../../../../index.html"><span class="booktitle">  <span class="ph mainbooktitle">DolphinDB 文档中心</span>  </span></a></div>
                    
                </div>
                
                
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse" id="wh_top_menu_and_indexterms_link">
                
                
                
                
            </div>
        <div class=" wh_search_input navbar-form wh_topic_page_search search " role="form">
            
            
            
            <form id="searchForm" method="get" role="search" action="../../../../search.html"><div><input type="search" placeholder="搜索 " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="搜索查询" required="required"/><button type="submit" class="wh_search_button" aria-label="搜索"><span class="search_input_text">搜索</span></button></div></form>
            
            <script src="/vendors/react/umd/react.production.min.js" defer="defer"></script>
<script src="/vendors/react-dom/umd/react-dom.production.min.js" defer="defer"></script>
<script src="/vendors/dayjs/dayjs.min.js" defer="defer"></script>
<script src="/vendors/antd/dist/antd.min.js" defer="defer"></script>
<script src="/vendors/@ant-design/icons/dist/index.umd.min.js" defer="defer"></script>
<script src="/zh/index.js" type="module"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" defer="defer"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer="defer"><!--


--></script>

            
        </div></div>
    </div>
</header>
        
        
         
        
        
        
        <div class="container-fluid" id="wh_topic_container">
            <div class="row">

                <nav class="wh_tools d-print-none navbar-expand-md" aria-label="Tools">
                    
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "><ol class="d-print-none"><li><span class="home"><a href="../../../../index.html"><span>主页</span></a></span></li><li><div class="topicref" data-id="api_protocol"><div class="title"><a href="../../../../api/connapi_intro.html"><span class="keyword label">连接器 &amp; API</span></a><div class="wh-tooltip"><p class="shortdesc">面向不同编程语言的 DolphinDB API 及连接器，相关协议和用法</p></div></div></div></li><li><div class="topicref" data-id="chap5_sectpythonapi"><div class="title"><a href="../../../../api/python/py.html"><span class="keyword label">Python API</span></a></div></div></li><li><div class="topicref" data-id="chap_advanced_operations"><div class="title"><a href="../../../../api/python/adv_oper.html">进阶操作</a></div></div></li><li><div class="topicref" data-id="object_oriented_ddb_operation"><div class="title"><a href="../../../../api/python/AdvancedOperations/ddb_ooo.html">面向对象数据库操作</a></div></div></li><li class="active"><div class="topicref" data-id="table"><div class="title"><a href="../../../../api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.html">Table</a></div></div></li></ol></div>
                    
                    
                    
                    <div class="wh_right_tools">
                        <button class="wh_hide_highlight" aria-label="切换搜索突出显示" title="切换搜索突出显示"></button>
                        <button class="webhelp_expand_collapse_sections" data-next-state="collapsed" aria-label="折叠截面" title="折叠截面"></button>
                        
                        
                        
                        
                        <div class=" wh_print_link print d-none d-md-inline-block "><button onClick="window.print()" title="打印此页" aria-label="打印此页"></button></div>
                        
                        <button type="button" id="wh_toc_button" class="custom-toggler navbar-toggler collapsed wh_toggle_button navbar-light" aria-expanded="false" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                    </div>
                    
                </nav>
            </div>
            
            
            
            
            <div class="wh_content_area">
                <div class="row">
                    
                        <nav id="wh_publication_toc" class="col-lg-3 col-md-3 col-sm-12 d-md-block d-none d-print-none" aria-label="Table of Contents Container">
                            <div id="wh_publication_toc_content">
		                        
                            	<div class=" wh_publication_toc " data-tooltip-position="right"><span class="expand-button-action-labels"><span id="button-expand-action" role="button" aria-label="Expand"></span><span id="button-collapse-action" role="button" aria-label="Collapse"></span><span id="button-pending-action" role="button" aria-label="Pending"></span></span><ul role="tree" aria-label="Table of Contents"><li role="treeitem"><div data-tocid="new_chap_about_sect_ddb_docs_intro-d9529e87" class="topicref" data-id="new_chap_about_sect_ddb_docs_intro" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../../../../about/ddb_docs_intro.html" id="new_chap_about_sect_ddb_docs_intro-d9529e87-link">文档使用说明</a><div class="wh-tooltip"><p class="shortdesc">如何获取 DolphinDB 帮助信息</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap1_getstarted-d9529e140" class="topicref" data-id="chap1_getstarted" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap1_getstarted-d9529e140-link" class="wh-expand-btn"></span><div class="title"><a href="../../../../getstarted/chap1_getstarted.html" id="chap1_getstarted-d9529e140-link"><span class="keyword label">快速上手</span></a><div class="wh-tooltip"><p class="shortdesc">如何快速部署 DolphinDB、建库建表、写入和查询数据</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="sectionddb_deployment-d9529e335" class="topicref" data-id="sectionddb_deployment" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action sectionddb_deployment-d9529e335-link" class="wh-expand-btn"></span><div class="title"><a href="../../../../deploy/deploy_intro.html" id="sectionddb_deployment-d9529e335-link"><span class="keyword label">部署</span></a><div class="wh-tooltip"><p class="shortdesc">如何在不同的场景中部署 DolphinDB</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="new_chap_database_manage_new_chap_dbmanage_landing_page-d9529e2313" class="topicref" data-id="new_chap_database_manage_new_chap_dbmanage_landing_page" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action new_chap_database_manage_new_chap_dbmanage_landing_page-d9529e2313-link" class="wh-expand-btn"></span><div class="title"><a href="../../../../db_distr_comp/cfg/db_intro.html" id="new_chap_database_manage_new_chap_dbmanage_landing_page-d9529e2313-link"><span class="keyword label">数据库</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 数据库的基本概念</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap7_tutorials_streaming-d9529e3490" class="topicref" data-id="chap7_tutorials_streaming" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap7_tutorials_streaming-d9529e3490-link" class="wh-expand-btn"></span><div class="title"><a href="../../../../stream/str_intro.html" id="chap7_tutorials_streaming-d9529e3490-link"><span class="keyword label">流数据</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 流数据引擎及流数据计算的基本概念</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9529e7385" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9529e7385-link" class="wh-expand-btn"></span><div class="title"><a href="../../../../db_distr_comp/db_oper/import_data.html" id="tocId-d9529e7385-link">数据迁移</a><div class="wh-tooltip"><p class="shortdesc">如何从不同数据源向 DolphinDB 迁移数据</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap7_tutorials_system_management-d9529e7812" class="topicref" data-id="chap7_tutorials_system_management" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap7_tutorials_system_management-d9529e7812-link" class="wh-expand-btn"></span><div class="title"><a href="../../../../sys_man/om_intro.html" id="chap7_tutorials_system_management-d9529e7812-link"><span class="keyword label">系统运维</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 的系统运维功能及方法</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="about_language_resources-d9529e16490" class="topicref" data-id="about_language_resources" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action about_language_resources-d9529e16490-link" class="wh-expand-btn"></span><div class="title"><a href="../../../../progr/progr_intro.html" id="about_language_resources-d9529e16490-link"><span class="keyword label">编程语言</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 编程基本概念与方法、SQL 在 DolphinDB 的应用</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="functions_references-d9529e26503" class="topicref" data-id="functions_references" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action functions_references-d9529e26503-link" class="wh-expand-btn"></span><div class="title"><a href="../../../../funcs/funcs_intro.html" id="functions_references-d9529e26503-link"><span class="keyword label">函数参考</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 函数分类、语法、详解及示例</p></div></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="api_protocol-d9529e86456" class="topicref" data-id="api_protocol" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action api_protocol-d9529e86456-link" class="wh-expand-btn"></span><div class="title"><a href="../../../../api/connapi_intro.html" id="api_protocol-d9529e86456-link"><span class="keyword label">连接器 &amp; API</span></a><div class="wh-tooltip"><p class="shortdesc">面向不同编程语言的 DolphinDB API 及连接器，相关协议和用法</p></div></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem" aria-expanded="false"><div data-tocid="cpp_api-d9529e86509" class="topicref" data-id="cpp_api" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action cpp_api-d9529e86509-link" class="wh-expand-btn"></span><div class="title"><a href="../../../../api/cpp/cpp_api.html" id="cpp_api-d9529e86509-link">C++ API</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="chap5_sectpythonapi-d9529e88349" class="topicref" data-id="chap5_sectpythonapi" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action chap5_sectpythonapi-d9529e88349-link" class="wh-expand-btn"></span><div class="title"><a href="../../../../api/python/py.html" id="chap5_sectpythonapi-d9529e88349-link"><span class="keyword label">Python API</span></a></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem" aria-expanded="false"><div data-tocid="chap1_quickstart_landingpage-d9529e88417" class="topicref" data-id="chap1_quickstart_landingpage" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap1_quickstart_landingpage-d9529e88417-link" class="wh-expand-btn"></span><div class="title"><a href="../../../../api/python/py_vamos.html" id="chap1_quickstart_landingpage-d9529e88417-link">快速上手</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap_basic_operations-d9529e88585" class="topicref" data-id="chap_basic_operations" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap_basic_operations-d9529e88585-link" class="wh-expand-btn"></span><div class="title"><a href="../../../../api/python/basic_oper.html" id="chap_basic_operations-d9529e88585-link">基础操作</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="chap_advanced_operations-d9529e89367" class="topicref" data-id="chap_advanced_operations" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action chap_advanced_operations-d9529e89367-link" class="wh-expand-btn"></span><div class="title"><a href="../../../../api/python/adv_oper.html" id="chap_advanced_operations-d9529e89367-link">进阶操作</a></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem" aria-expanded="false"><div data-tocid="convert_type-d9529e89413" class="topicref" data-id="convert_type" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action convert_type-d9529e89413-link" class="wh-expand-btn"></span><div class="title"><a href="../../../../api/python/AdvancedOperations/convert_type.html" id="convert_type-d9529e89413-link"><span class="keyword">数据类型转换</span></a></div></div></li><li role="treeitem"><div data-tocid="多种写入方案-d9529e89767" class="topicref" data-id="多种写入方案" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../../../../api/python/AdvancedOperations/WriteOptions/WriteOptions.html" id="多种写入方案-d9529e89767-link">多种写入方案</a></div></div></li><li role="treeitem"><div data-tocid="流订阅模式-d9529e89813" class="topicref" data-id="流订阅模式" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../../../../api/python/AdvancedOperations/SubscriptionOptions/SubscriptionOptions.html" id="流订阅模式-d9529e89813-link">流订阅模式</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="eventsendsub-d9529e89859" class="topicref" data-id="eventsendsub" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action eventsendsub-d9529e89859-link" class="wh-expand-btn"></span><div class="title"><a href="../../../../api/python/AdvancedOperations/EventSendSub/eventsendsub.html" id="eventsendsub-d9529e89859-link">事件发送及订阅</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="object_oriented_ddb_operation-d9529e90043" class="topicref" data-id="object_oriented_ddb_operation" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action object_oriented_ddb_operation-d9529e90043-link" class="wh-expand-btn"></span><div class="title"><a href="../../../../api/python/AdvancedOperations/ddb_ooo.html" id="object_oriented_ddb_operation-d9529e90043-link">面向对象数据库操作</a></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem"><div data-tocid="database-d9529e90089" class="topicref" data-id="database" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../../../../api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Database.html" id="database-d9529e90089-link">Database</a></div></div></li><li role="treeitem" class="active"><div data-tocid="table-d9529e90135" class="topicref" data-id="table" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../../../../api/python/AdvancedOperations/ObjectOrientedOperationsOnDdbOBjects/Table.html" id="table-d9529e90135-link">Table</a></div></div></li></ul></li><li role="treeitem"><div data-tocid="其他功能-d9529e90181" class="topicref" data-id="其他功能" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../../../../api/python/AdvancedOperations/OtherFunctions/OtherFunctions.html" id="其他功能-d9529e90181-link">其他功能</a></div></div></li></ul></li><li role="treeitem"><div data-tocid="离线安装-python-api-d9529e90227" class="topicref" data-id="离线安装-python-api" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../../../../api/python/py_api_inst_offline.html" id="离线安装-python-api-d9529e90227-link">离线安装 Python API</a></div></div></li></ul></li><li role="treeitem"><div data-tocid="c-api-d9529e90273" class="topicref" data-id="c-api" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../../../../api/csharp.html" id="c-api-d9529e90273-link">C# API</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="javaapi_landingpage-d9529e90319" class="topicref" data-id="javaapi_landingpage" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action javaapi_landingpage-d9529e90319-link" class="wh-expand-btn"></span><div class="title"><a href="../../../../api/java_api/newjava.html" id="javaapi_landingpage-d9529e90319-link">Java API</a></div></div></li><li role="treeitem"><div data-tocid="jdbc-连接器-d9529e91745" class="topicref" data-id="jdbc-连接器" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../../../../api/jdbc.html" id="jdbc-连接器-d9529e91745-link">JDBC 连接器</a></div></div></li><li role="treeitem"><div data-tocid="go-api-d9529e91791" class="topicref" data-id="go-api" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../../../../api/go.html" id="go-api-d9529e91791-link">Go API</a></div></div></li><li role="treeitem"><div data-tocid="javascript-api-d9529e91837" class="topicref" data-id="javascript-api" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../../../../api/js.html" id="javascript-api-d9529e91837-link">JavaScript API</a></div></div></li><li role="treeitem"><div data-tocid="json-api-d9529e91883" class="topicref" data-id="json-api" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../../../../api/json.html" id="json-api-d9529e91883-link">JSON API</a></div></div></li><li role="treeitem"><div data-tocid="r-api-d9529e91929" class="topicref" data-id="r-api" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../../../../api/r.html" id="r-api-d9529e91929-link">R API</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap6_plugin-d9529e91976" class="topicref" data-id="chap6_plugin" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap6_plugin-d9529e91976-link" class="wh-expand-btn"></span><div class="title"><a href="../../../../plugins/plg_intro.html" id="chap6_plugin-d9529e91976-link"><span class="keyword label">插件</span></a><div class="wh-tooltip"><p class="shortdesc">多个应用场景的插件使用说明和插件开发指导</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="third_party-d9529e94749" class="topicref" data-id="third_party" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action third_party-d9529e94749-link" class="wh-expand-btn"></span><div class="title"><a href="../../../../third_party.html" id="third_party-d9529e94749-link">第三方工具</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="about_tutorials-d9529e94980" class="topicref" data-id="about_tutorials" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action about_tutorials-d9529e94980-link" class="wh-expand-btn"></span><div class="title"><a href="../../../../tutorials/about_tutorials.html" id="about_tutorials-d9529e94980-link"><span class="keyword label">教程</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 产品使用教程</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9529e101769" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9529e101769-link" class="wh-expand-btn"></span><div class="title"><a href="../../../../rn/server/3_00_1.html" id="tocId-d9529e101769-link">版本说明</a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 版本发布历史</p></div></div></div></li></ul></div>
		                        
                            </div>
                        </nav>
                    
                    
                    <div class="col-lg-7 col-md-9 col-sm-12" id="wh_topic_body">
                        <button id="wh_close_publication_toc_button" class="close-toc-button d-none" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        <button id="wh_close_topic_toc_button" class="close-toc-button d-none" aria-label="Toggle topic table of content" aria-controls="wh_topic_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        
                        <div class=" wh_topic_content body "><main role="main"><article class="- topic/topic topic" role="article" aria-labelledby="ariaid-title1"><h1 class="- topic/title title topictitle1" id="ariaid-title1">Table</h1><div class="- topic/body body"><p class="- topic/p p">在 Python API 中，可以使用 DolphinDB Python API 的原生方法来创建、使用数据库及数据表，本节将介绍如何创建数据表、使用 SQL 操作数据表。</p></div><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title2" id="table-与-sessiontable"><h2 class="- topic/title title topictitle2" id="ariaid-title2">Table 与 session.table</h2><div class="- topic/body body"><p class="- topic/p p">Python API 将 DolphinDB 服务端的数据表对象句柄，在 API 包装为 Table 类，封装实现部分功能。通常使用 session.table 或 session.loadTable 方法构造，也可以通过 loadText 等函数获得。</p><p class="- topic/p p">接口如下：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">session.table(dbPath=None, data=None, tableAliasName=None, inMem=False, partitions=None)</pre><ul class="- topic/ul ul"><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">dbPath</strong>：数据库路径，内存表或流数据表无需指定该参数。</li><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">data</strong>：数据表的数据，可以为 dict、pd.DataFrame 或 DolphinDB 服务端数据表名。</li><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">tableAliasName</strong>：表的别名。</li><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">inMem</strong>：是否加载表数据到 DolphinDB 服务端内存中。</li><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">partitions</strong>：将被加载到 DolphinDB 服务端内存中的分区。</li></ul></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title3" id="上传数据为临时表"><h3 class="- topic/title title topictitle3" id="ariaid-title3">上传数据为临时表</h3><div class="- topic/body body"><p class="- topic/p p">如果 data 参数传入 dict 或 pd.DataFrame，则表示上传该对象到 DolphinDB 服务端为临时表，此时无需指定 dbPath、inMem、partitions。</p><p class="- topic/p p">代码示例如下：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">data1 = pd.DataFrame({
    <span class="hl-string">'a'</span>: [<span class="hl-number">1</span>, <span class="hl-number">2</span>, <span class="hl-number">3</span>],
    <span class="hl-string">'b'</span>: [<span class="hl-number">4</span>, <span class="hl-number">5</span>, <span class="hl-number">6</span>],
})
t1 = s.table(data=data1)
<strong class="hl-keyword">print</strong>(t1, t1.tableName())
data2 = {
    <span class="hl-string">'a'</span>: [<span class="hl-string">'a'</span>, <span class="hl-string">'b'</span>, <span class="hl-string">'c'</span>],
    <span class="hl-string">'b'</span>: [<span class="hl-number">1</span>, <span class="hl-number">2</span>, <span class="hl-number">3</span>],
}
t2 = s.table(data=data2)
<strong class="hl-keyword">print</strong>(t2, t2.tableName())</pre><p class="- topic/p p">输出结果如下：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>&lt;dolphindb.table.Table object at 0x7fbd5f02bd60&gt; TMP_TBL_3cc57246
&lt;dolphindb.table.Table object at 0x7fbd3205fc70&gt; TMP_TBL_dbae4978</code></pre><p class="- topic/p p">data1 和 data2 都作为临时表上传至服务端，对应表名分别为 TMP_TBL_3cc57246 和 TMP_TBL_dbae4978。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title4" id="获取服务端数据表句柄"><h3 class="- topic/title title topictitle3" id="ariaid-title4">获取服务端数据表句柄</h3><div class="- topic/body body"><p class="- topic/p p">data 参数传入字符串，则表示获取服务端数据表句柄。</p><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">如果同时指定 dbPath 和 data，执行函数则表示从 dbPath 对应的数据库中加载表名为 data 的数据表。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">dbPath = <span class="hl-string">"dfs://testTable"</span>
<strong class="hl-keyword">if</strong> s.existsDatabase(dbPath):
    s.dropDatabase(dbPath)
db = s.database(partitionType=keys.VALUE, partitions=[<span class="hl-number">1</span>, <span class="hl-number">2</span>, <span class="hl-number">3</span>], dbPath=dbPath, engine=<span class="hl-string">"TSDB"</span>)
s.run(<span class="hl-string">"schema_t = table(100:0, `ctime`csymbol`price`qty, [TIMESTAMP, SYMBOL, DOUBLE, INT])"</span>)
schema_t = s.table(data=<span class="hl-string">"schema_t"</span>)
db.createTable(schema_t, <span class="hl-string">"pt"</span>, [<span class="hl-string">"csymbol"</span>])
pt = s.table(dbPath=dbPath, data=<span class="hl-string">"pt"</span>)
<strong class="hl-keyword">print</strong>(pt, pt.tableName())
<strong class="hl-keyword">print</strong>(pt.toDF())</pre><p class="- topic/p p">输出结果如下：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>&lt;dolphindb.table.Table object at 0x7f5036bcd040&gt; pt_TMP_TBL_5229a3cc
Empty DataFrame
Columns: [ctime, csymbol, price, qty]
Index: []</code></pre></li><li class="- topic/li li"><p class="- topic/p p">如果仅指定 data，执行函数则表示获取名为 data 的内存表句柄。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">s.run(<span class="hl-string">"test_t = table(100:0, `ctime`csymbol`price`qty, [TIMESTAMP, SYMBOL, DOUBLE, INT])"</span>)
t = s.table(data=<span class="hl-string">"test_t"</span>)
<strong class="hl-keyword">print</strong>(t, t.tableName())
<strong class="hl-keyword">print</strong>(t.toDF())</pre><p class="- topic/p p">输出结果如下：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>&lt;dolphindb.table.Table object at 0x7f11ffb3c070&gt; test_t
Empty DataFrame
Columns: [ctime, csymbol, price, qty]
Index: []</code></pre></li></ol></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title5" id="tablealiasname"><h3 class="- topic/title title topictitle3" id="ariaid-title5">tableAliasName</h3><div class="- topic/body body"><p class="- topic/p p">如果指定该参数，则加载表时不会使用随机表名作为句柄名称。</p><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">上传本地变量至服务端时指定该参数。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">data1 = pd.DataFrame({
    <span class="hl-string">'a'</span>: [<span class="hl-number">1</span>, <span class="hl-number">2</span>, <span class="hl-number">3</span>],
    <span class="hl-string">'b'</span>: [<span class="hl-number">4</span>, <span class="hl-number">5</span>, <span class="hl-number">6</span>],
})
t1 = s.table(data=data1, tableAliasName=<span class="hl-string">"data1"</span>)
<strong class="hl-keyword">print</strong>(t1, t1.tableName())
data2 = {
    <span class="hl-string">'a'</span>: [<span class="hl-string">'a'</span>, <span class="hl-string">'b'</span>, <span class="hl-string">'c'</span>],
    <span class="hl-string">'b'</span>: [<span class="hl-number">1</span>, <span class="hl-number">2</span>, <span class="hl-number">3</span>],
}
t2 = s.table(data=data2, tableAliasName=<span class="hl-string">"data2"</span>)
<strong class="hl-keyword">print</strong>(t2, t2.tableName())</pre><p class="- topic/p p">输出结果如下：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>&lt;dolphindb.table.Table object at 0x7f167ecb69d0&gt; data1
&lt;dolphindb.table.Table object at 0x7f1651d0bc40&gt; data2</code></pre></li><li class="- topic/li li"><p class="- topic/p p">获取 DolphinDB 服务端数据库中数据表时指定该参数。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">dbPath = <span class="hl-string">"dfs://testTable"</span>
<strong class="hl-keyword">if</strong> s.existsDatabase(dbPath):
    s.dropDatabase(dbPath)
db = s.database(partitionType=keys.VALUE, partitions=[<span class="hl-number">1</span>, <span class="hl-number">2</span>, <span class="hl-number">3</span>], dbPath=dbPath, engine=<span class="hl-string">"TSDB"</span>)
s.run(<span class="hl-string">"schema_t = table(100:0, `ctime`csymbol`price`qty, [TIMESTAMP, SYMBOL, DOUBLE, INT])"</span>)
schema_t = s.table(data=<span class="hl-string">"schema_t"</span>)
db.createTable(schema_t, <span class="hl-string">"pt"</span>, [<span class="hl-string">"csymbol"</span>])
pt = s.table(dbPath=dbPath, data=<span class="hl-string">"pt"</span>, tableAliasName=<span class="hl-string">"tmp_pt"</span>)
<strong class="hl-keyword">print</strong>(pt, pt.tableName())
<strong class="hl-keyword">print</strong>(pt.toDF())</pre><p class="- topic/p p">输出结果如下：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>&lt;dolphindb.table.Table object at 0x7f3350edc040&gt; tmp_pt
Empty DataFrame
Columns: [ctime, csymbol, price, qty]
Index: []</code></pre></li><li class="- topic/li li"><p class="- topic/p p">获取 DolphinDB 服务端内存表句柄时指定该参数。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">s.run(<span class="hl-string">"test_t = table(100:0, `ctime`csymbol`price`qty, [TIMESTAMP, SYMBOL, DOUBLE, INT])"</span>)
t = s.table(data=<span class="hl-string">"test_t"</span>, tableAliasName=<span class="hl-string">"test_t2"</span>)
<strong class="hl-keyword">print</strong>(t, t.tableName())
<strong class="hl-keyword">print</strong>(t.toDF())</pre><p class="- topic/p p">输出结果如下：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>&lt;dolphindb.table.Table object at 0x7f9fb55b4070&gt; test_t
Empty DataFrame
Columns: [ctime, csymbol, price, qty]
Index: []</code></pre><p class="- topic/p p">从上述例子中可以看出，如果加载分区表或上传本地数据时，可以通过指定别名来避免使用临时表名；如果直接使用表名加载数据表句柄，则该参数无效。</p></li></ol></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title6" id="inmem-partitions"><h3 class="- topic/title title topictitle3" id="ariaid-title6">inMem, partitions</h3><div class="- topic/body body"><p class="- topic/p p">该参数仅在加载磁盘数据库中的数据表时有效，参数详细使用方式请参考 <a class="- topic/xref xref" href="../../../../funcs/l/loadTable.html">loadTable</a>。</p></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title7" id="sessionloadtable"><h2 class="- topic/title title topictitle2" id="ariaid-title7">session.loadTable</h2><div class="- topic/body body"><p class="- topic/p p">该函数和 session.table 方法类似，返回值为 Table，但无法上传本地数据，仅能获取 DolphinDB 服务端数据表句柄。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">session.loadTable(tableName, dbPath=None, partitions=None, memoryMode=False)</pre><ul class="- topic/ul ul"><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">tableName</strong>：内存表名或数据库中数据表表名。</li><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">dbPath</strong>：数据库路径。</li><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">partitions</strong>：将被加载到 DolphinDB 服务端内存中的分区。</li><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">memoryMode</strong>：是否加载表数据到 DolphinDB 服务端内存中。</li></ul></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title8" id="加载内存表"><h3 class="- topic/title title topictitle3" id="ariaid-title8">加载内存表</h3><div class="- topic/body body"><p class="- topic/p p">代码示例如下：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">s.run(<span class="hl-string">"test_t = table(100:0, `ctime`csymbol`price`qty, [TIMESTAMP, SYMBOL, DOUBLE, INT])"</span>)
t = s.loadTable(<span class="hl-string">"test_t"</span>)
<strong class="hl-keyword">print</strong>(t, t.tableName())
<strong class="hl-keyword">print</strong>(t.toDF())</pre><p class="- topic/p p">输出结果如下：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>&lt;dolphindb.table.Table object at 0x7fd1c90a4c10&gt; test_t
Empty DataFrame
Columns: [ctime, csymbol, price, qty]
Index: []</code></pre></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title9" id="加载数据库表"><h3 class="- topic/title title topictitle3" id="ariaid-title9">加载数据库表</h3><div class="- topic/body body"><p class="- topic/p p">代码示例如下：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">dbPath = <span class="hl-string">"dfs://testTable"</span>
<strong class="hl-keyword">if</strong> s.existsDatabase(dbPath):
    s.dropDatabase(dbPath)
db = s.database(partitionType=keys.VALUE, partitions=[<span class="hl-number">1</span>, <span class="hl-number">2</span>, <span class="hl-number">3</span>], dbPath=dbPath, engine=<span class="hl-string">"TSDB"</span>)
s.run(<span class="hl-string">"schema_t = table(100:0, `ctime`csymbol`price`qty, [TIMESTAMP, SYMBOL, DOUBLE, INT])"</span>)
schema_t = s.table(data=<span class="hl-string">"schema_t"</span>)
db.createTable(schema_t, <span class="hl-string">"pt"</span>, [<span class="hl-string">"csymbol"</span>])
pt = s.loadTable(<span class="hl-string">"pt"</span>, dbPath=dbPath)
<strong class="hl-keyword">print</strong>(pt, pt.tableName())
<strong class="hl-keyword">print</strong>(pt.toDF())</pre><p class="- topic/p p">输出结果如下：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>&lt;dolphindb.table.Table object at 0x7fdaf7885eb0&gt; pt_TMP_TBL_0dfdc80a
Empty DataFrame
Columns: [ctime, csymbol, price, qty]
Index: []</code></pre></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title10" id="上传的数据表的生命周期"><h2 class="- topic/title title topictitle2" id="ariaid-title10">上传的数据表的生命周期</h2><div class="- topic/body body"><p class="- topic/p p"><code class="+ topic/ph pr-d/codeph ph codeph">table</code> 和 <code class="+ topic/ph pr-d/codeph ph codeph">loadTable</code> 方法返回一个 Python 本地变量，如果上传一个本地数据对象到服务端，且未指定别名，则使用随机表名作为该变量的句柄名。下例中，上传本地 data 对象到服务端，对应的 Python 本地变量为 t。服务端表名可以通过 Table.tableName 方法获取。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">data = pd.DataFrame({
    <span class="hl-string">'a'</span>: [<span class="hl-number">1</span>, <span class="hl-number">2</span>, <span class="hl-number">3</span>],
    <span class="hl-string">'b'</span>: [<span class="hl-number">4</span>, <span class="hl-number">5</span>, <span class="hl-number">6</span>],
})
t = s.table(data=data)
<strong class="hl-keyword">print</strong>(t.tableName())</pre><p class="- topic/p p">数据结果如下：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>TMP_TBL_e03723c9</code></pre><p class="- topic/p p">其中 TMP_TBL_ 开头，表示该句柄为临时表的句柄，会随着 Python 端 Table 对象的析构而析构。</p><p class="- topic/p p">此时释放 DolphinDB 服务端对象有三种方法：</p><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p"><code class="+ topic/ph pr-d/codeph ph codeph">undef</code> 方法</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">s.undef(t.tableName(), <span class="hl-string">"VAR"</span>)</pre></li><li class="- topic/li li"><p class="- topic/p p">将服务端对象置空</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">s.run(f<span class="hl-string">"{t.tableName()}=NULL"</span>)</pre></li><li class="- topic/li li"><p class="- topic/p p">析构本地变量以取消本地对象对服务端对象的引用</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python"><strong class="hl-keyword">del</strong> t</pre></li></ol><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注意：</strong> 如果在获取句柄时指定别名，或者获取服务端已存在的非临时表句柄，则 Python 端对象的析构并不会影响服务端数据。</p><p class="- topic/p p">如果一个表对象只是一次性使用，建议不使用上传机制，可以直接通过函数调用来完成，将表对象作为函数的一个参数。函数调用不会缓存数据。函数调用结束后，所有数据都释放，而且只有一次网络传输，降低网络延迟。</p></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title11" id="表操作"><h2 class="- topic/title title topictitle2" id="ariaid-title11">表操作</h2><div class="- topic/body body"><p class="- topic/p p">通过 session.table/session.loadTable 方法获得的对象通常为 Table，API 提供一系列方法用于处理 Table，使得能够在 API 端对表进行操作。例如，调用 select、where等方法执行一次查询；调用 update、delete 等方法更新数据……</p><p class="- topic/p p">需要注意的是，调用 update/delete 方法返回的对象并非 Table 类，而是对使用者透明的 TableUpdate/TableDelete 对象，因此，在调用这些方法后，需要执行 execute 方法才能将表数据的更新、修改同步至服务器。详情请参考对应函数的描述以及示例。</p><p class="- topic/p p">本节将用到 <a class="- topic/xref xref" href="../../data/example.csv">example.csv</a> 文件。</p></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title12" id="获取表属性"><h3 class="- topic/title title topictitle3" id="ariaid-title12">获取表属性</h3><div class="- topic/body body"><p class="- topic/p p">提供 rows, cols, colNames 和 schema 方法可获取表属性。</p><p class="- topic/p p">调用 rows/cols 属性可以获取当前表的行数或列数。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">&gt;&gt;&gt; s.run(<span class="hl-string">"t = table(1..5 as a, 2..6 as b)    "</span>)
&gt;&gt;&gt; t = s.table(data=<span class="hl-string">"t"</span>)
&gt;&gt;&gt; t.rows
<span class="hl-number">5</span>
&gt;&gt;&gt; t.cols
<span class="hl-number">2</span></pre><p class="- topic/p p">调用 colNames 属性可以获取当前表的列名。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">&gt;&gt;&gt; t.colNames
[<span class="hl-string">'a'</span>, <span class="hl-string">'b'</span>]</pre><p class="- topic/p p">调用 schema 属性返回一个 pd.DataFrame，表示当前表的结构（返回结果与服务端函数 schema 的结果中的 colDefs 属性一致）。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">&gt;&gt;&gt; t.schema
  name typeString  typeInt  extra comment
<span class="hl-number">0</span>    a        INT        <span class="hl-number">4</span>    NaN        
<span class="hl-number">1</span>    b        INT        <span class="hl-number">4</span>    NaN   </pre></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title13" id="select"><h3 class="- topic/title title topictitle3" id="ariaid-title13">select</h3><div class="- topic/body body"><p class="- topic/p p">该方法类似 SQL 语句中的 select 子句，用于选取部分列。下例中使用 toDF 方法获取表对应的 pd.DataFrame 对象，详细使用请参考本文 4.6 toDF 方法。</p><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">使用一系列的列名作为输入内容。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">&gt;&gt;&gt; trade=s.loadText(WORK_DIR+<span class="hl-string">"/example.csv"</span>)
&gt;&gt;&gt; trade.select([<span class="hl-string">"ticker"</span>, <span class="hl-string">"date"</span>]).toDF()
      ticker       date
<span class="hl-number">0</span>       AMZN <span class="hl-number">1997</span>-<span class="hl-number">05</span>-<span class="hl-number">15</span>
<span class="hl-number">1</span>       AMZN <span class="hl-number">1997</span>-<span class="hl-number">05</span>-<span class="hl-number">16</span>
<span class="hl-number">2</span>       AMZN <span class="hl-number">1997</span>-<span class="hl-number">05</span>-<span class="hl-number">19</span>
<span class="hl-number">3</span>       AMZN <span class="hl-number">1997</span>-<span class="hl-number">05</span>-<span class="hl-number">20</span>
<span class="hl-number">4</span>       AMZN <span class="hl-number">1997</span>-<span class="hl-number">05</span>-<span class="hl-number">21</span>
...</pre></li><li class="- topic/li li"><p class="- topic/p p">使用字符串作为输入内容。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">&gt;&gt;&gt; trade.select(<span class="hl-string">"ticker, date, bid"</span>).toDF()
      ticker       date        bid
<span class="hl-number">0</span>       AMZN <span class="hl-number">1997</span>-<span class="hl-number">05</span>-<span class="hl-number">15</span>   <span class="hl-number">23.50000</span>
<span class="hl-number">1</span>       AMZN <span class="hl-number">1997</span>-<span class="hl-number">05</span>-<span class="hl-number">16</span>   <span class="hl-number">20.50000</span>
<span class="hl-number">2</span>       AMZN <span class="hl-number">1997</span>-<span class="hl-number">05</span>-<span class="hl-number">19</span>   <span class="hl-number">20.50000</span>
<span class="hl-number">3</span>       AMZN <span class="hl-number">1997</span>-<span class="hl-number">05</span>-<span class="hl-number">20</span>   <span class="hl-number">19.62500</span>
<span class="hl-number">4</span>       AMZN <span class="hl-number">1997</span>-<span class="hl-number">05</span>-<span class="hl-number">21</span>   <span class="hl-number">17.12500</span>
...</pre></li></ol></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title14" id="update"><h3 class="- topic/title title topictitle3" id="ariaid-title14">update</h3><div class="- topic/body body"><p class="- topic/p p">使用 <code class="+ topic/ph pr-d/codeph ph codeph">update</code> 可以更新表，其中 <code class="+ topic/ph pr-d/codeph ph codeph">cols</code> 表示待更新的列，<code class="+ topic/ph pr-d/codeph ph codeph">vals</code> 表示待更新的值。需要注意，必须和 <code class="+ topic/ph pr-d/codeph ph codeph">execute</code> 一起使用才能将 Python 端的修改同步至服务端。</p><p class="- topic/p p">从下述示例中可以看出，只有执行 execute 后才会将 update 更新的数据同步至服务器。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">&gt;&gt;&gt; trade = s.loadText(WORK_DIR+<span class="hl-string">"/example.csv"</span>)
&gt;&gt;&gt; t1 = trade.update([<span class="hl-string">"VOL"</span>],[<span class="hl-string">"999999"</span>]).where(<span class="hl-string">"TICKER=`AMZN"</span>).where([<span class="hl-string">"date=2015.12.16"</span>])
&gt;&gt;&gt; t2 = trade.where(<span class="hl-string">"ticker=`AMZN"</span>).where(<span class="hl-string">"date=2015.12.16"</span>)
&gt;&gt;&gt; t2.toDF()
  TICKER       date      VOL        PRC        BID        ASK
<span class="hl-number">0</span>   AMZN <span class="hl-number">2015</span>-<span class="hl-number">12</span>-<span class="hl-number">16</span>  <span class="hl-number">3964470</span>  <span class="hl-number">675.77002</span>  <span class="hl-number">675.76001</span>  <span class="hl-number">675.83002</span>
&gt;&gt;&gt; t1 = trade.update([<span class="hl-string">"VOL"</span>],[<span class="hl-string">"999999"</span>]).where(<span class="hl-string">"TICKER=`AMZN"</span>).where([<span class="hl-string">"date=2015.12.16"</span>]).execute()
&gt;&gt;&gt; t2.toDF()
  TICKER       date     VOL        PRC        BID        ASK
<span class="hl-number">0</span>   AMZN <span class="hl-number">2015</span>-<span class="hl-number">12</span>-<span class="hl-number">16</span>  <span class="hl-number">999999</span>  <span class="hl-number">675.77002</span>  <span class="hl-number">675.76001</span>  <span class="hl-number">675.83002</span></pre></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title15" id="delete"><h3 class="- topic/title title topictitle3" id="ariaid-title15">delete</h3><div class="- topic/body body"><p class="- topic/p p">使用 <code class="+ topic/ph pr-d/codeph ph codeph">delete</code> 可以删除表中的记录，但必须和 <code class="+ topic/ph pr-d/codeph ph codeph">execute</code> 一起使用才能将 Python 端的修改同步至服务端。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">&gt;&gt;&gt; trade = s.loadText(WORK_DIR+<span class="hl-string">"/example.csv"</span>)
&gt;&gt;&gt; trade.rows
<span class="hl-number">13136</span>
&gt;&gt;&gt; t = trade.delete().where(<span class="hl-string">'date&lt;2013.01.01'</span>)
&gt;&gt;&gt; trade.rows
<span class="hl-number">13136</span>
&gt;&gt;&gt; t = trade.delete().where(<span class="hl-string">'date&lt;2013.01.01'</span>).execute()
&gt;&gt;&gt; trade.rows
<span class="hl-number">3024</span></pre></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title16" id="groupby"><h3 class="- topic/title title topictitle3" id="ariaid-title16">groupby</h3><div class="- topic/body body"><p class="- topic/p p"><code class="+ topic/ph pr-d/codeph ph codeph">groupby</code> 表示根据一定规则进行分组，该方法和 服务端 函数 groupby 一致，调用后，在SQL 中添加 groupby 子句，接收参数为字符串列表或者单个字符串，表示需要分组的列。如果后续追加 having 子句，having子句需包含聚合函数，表示为符合聚合函数条件的每组产生一条记录。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注：</strong> <code class="+ topic/ph pr-d/codeph ph codeph">groupby</code> 后面需要使用聚合函数，如 <code class="+ topic/ph pr-d/codeph ph codeph">count</code>, <code class="+ topic/ph pr-d/codeph ph codeph">sum</code>, <code class="+ topic/ph pr-d/codeph ph codeph">agg</code> 或 <code class="+ topic/ph pr-d/codeph ph codeph">agg2</code> 等。</p><p class="- topic/p p">准备数据库的脚本如下：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">&gt;&gt;&gt; dbPath = <span class="hl-string">"dfs://valuedb"</span>
&gt;&gt;&gt; <strong class="hl-keyword">if</strong> s.existsDatabase(dbPath):
...     s.dropDatabase(dbPath)
&gt;&gt;&gt; s.database(dbName=<span class="hl-string">'mydb'</span>, partitionType=keys.VALUE, partitions=[<span class="hl-string">"AMZN"</span>,<span class="hl-string">"NFLX"</span>,<span class="hl-string">"NVDA"</span>], dbPath=dbPath)
&gt;&gt;&gt; trade = s.loadTextEx(dbPath=dbPath, partitionColumns=[<span class="hl-string">"TICKER"</span>], tableName=<span class="hl-string">'trade'</span>, remoteFilePath=WORK_DIR+<span class="hl-string">"/example.csv"</span>)</pre><p class="- topic/p p">单独使用 <code class="+ topic/ph pr-d/codeph ph codeph">groupby</code>，分别计算每个股票的 vol 总和与 prc 总和：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">&gt;&gt;&gt; trade.select([<span class="hl-string">'sum(vol)'</span>,<span class="hl-string">'sum(prc)'</span>]).groupby([<span class="hl-string">'ticker'</span>]).toDF()
  ticker      sum_vol       sum_prc
<span class="hl-number">0</span>   AMZN  <span class="hl-number">33706396492</span>  <span class="hl-number">772503.81377</span>
<span class="hl-number">1</span>   NFLX  <span class="hl-number">14928048887</span>  <span class="hl-number">421568.81674</span>
<span class="hl-number">2</span>   NVDA  <span class="hl-number">46879603806</span>  <span class="hl-number">127139.51092</span></pre><p class="- topic/p p">同时使用 <code class="+ topic/ph pr-d/codeph ph codeph">groupby</code> 与 <code class="+ topic/ph pr-d/codeph ph codeph">having</code>：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">&gt;&gt;&gt; trade.select(<span class="hl-string">'count(ask)'</span>).groupby([<span class="hl-string">'vol'</span>]).having(<span class="hl-string">'count(ask)&gt;1'</span>).toDF()
       vol  count_ask
<span class="hl-number">0</span>   <span class="hl-number">579392</span>          <span class="hl-number">2</span>
<span class="hl-number">1</span>  <span class="hl-number">3683504</span>          <span class="hl-number">2</span>
<span class="hl-number">2</span>  <span class="hl-number">5732076</span>          <span class="hl-number">2</span>
<span class="hl-number">3</span>  <span class="hl-number">6299736</span>          <span class="hl-number">2</span>
<span class="hl-number">4</span>  <span class="hl-number">6438038</span>          <span class="hl-number">2</span>
<span class="hl-number">5</span>  <span class="hl-number">6946976</span>          <span class="hl-number">2</span>
<span class="hl-number">6</span>  <span class="hl-number">8160197</span>          <span class="hl-number">2</span>
<span class="hl-number">7</span>  <span class="hl-number">8924303</span>          <span class="hl-number">2</span></pre></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title17" id="contextby"><h3 class="- topic/title title topictitle3" id="ariaid-title17">contextby</h3><div class="- topic/body body"><p class="- topic/p p"><code class="+ topic/ph pr-d/codeph ph codeph">contextby</code> 是 DolphinDB 独有的功能，是对标准 SQL 语句的拓展。使用 context by 子句可以简化对时间序列数据的操作。<code class="+ topic/ph pr-d/codeph ph codeph">contextby</code> 与 <code class="+ topic/ph pr-d/codeph ph codeph">groupby</code> 相似，区别在于 <code class="+ topic/ph pr-d/codeph ph codeph">groupby</code> 为每个组返回一个标量，但是 <code class="+ topic/ph pr-d/codeph ph codeph">contextby</code> 为每个组返回一个向量，且向量的长度与该组的行数相同。详细使用方式请参考 <a class="- topic/xref xref" href="../../../../progr/sql/contextBy.html">context by</a>。</p><p class="- topic/p p">与 having 子句连用时，如果只与聚合函数一起使用，则结果是符合聚合函数条件的分组，每组记录与输入数据中记录数一致；如果与非聚合函数一起使用，结果是符合指定条件的分组。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">&gt;&gt;&gt; trade.contextby(<span class="hl-string">'ticker'</span>).top(<span class="hl-number">3</span>).toDF()
  TICKER       date      VOL      PRC      BID      ASK
<span class="hl-number">0</span>   AMZN <span class="hl-number">1997</span>-<span class="hl-number">05</span>-<span class="hl-number">15</span>  <span class="hl-number">6029815</span>  <span class="hl-number">23.5000</span>  <span class="hl-number">23.5000</span>  <span class="hl-number">23.6250</span>
<span class="hl-number">1</span>   AMZN <span class="hl-number">1997</span>-<span class="hl-number">05</span>-<span class="hl-number">16</span>  <span class="hl-number">1232226</span>  <span class="hl-number">20.7500</span>  <span class="hl-number">20.5000</span>  <span class="hl-number">21.0000</span>
<span class="hl-number">2</span>   AMZN <span class="hl-number">1997</span>-<span class="hl-number">05</span>-<span class="hl-number">19</span>   <span class="hl-number">512070</span>  <span class="hl-number">20.5000</span>  <span class="hl-number">20.5000</span>  <span class="hl-number">20.6250</span>
<span class="hl-number">3</span>   NFLX <span class="hl-number">2002</span>-<span class="hl-number">05</span>-<span class="hl-number">23</span>  <span class="hl-number">7507079</span>  <span class="hl-number">16.7500</span>  <span class="hl-number">16.7500</span>  <span class="hl-number">16.8500</span>
<span class="hl-number">4</span>   NFLX <span class="hl-number">2002</span>-<span class="hl-number">05</span>-<span class="hl-number">24</span>   <span class="hl-number">797783</span>  <span class="hl-number">16.9400</span>  <span class="hl-number">16.9400</span>  <span class="hl-number">16.9500</span>
<span class="hl-number">5</span>   NFLX <span class="hl-number">2002</span>-<span class="hl-number">05</span>-<span class="hl-number">28</span>   <span class="hl-number">474866</span>  <span class="hl-number">16.2000</span>  <span class="hl-number">16.2000</span>  <span class="hl-number">16.3700</span>
<span class="hl-number">6</span>   NVDA <span class="hl-number">1999</span>-<span class="hl-number">01</span>-<span class="hl-number">22</span>  <span class="hl-number">5702636</span>  <span class="hl-number">19.6875</span>  <span class="hl-number">19.6250</span>  <span class="hl-number">19.6875</span>
<span class="hl-number">7</span>   NVDA <span class="hl-number">1999</span>-<span class="hl-number">01</span>-<span class="hl-number">25</span>  <span class="hl-number">1074571</span>  <span class="hl-number">21.7500</span>  <span class="hl-number">21.7500</span>  <span class="hl-number">21.8750</span>
<span class="hl-number">8</span>   NVDA <span class="hl-number">1999</span>-<span class="hl-number">01</span>-<span class="hl-number">26</span>   <span class="hl-number">719199</span>  <span class="hl-number">20.0625</span>  <span class="hl-number">20.0625</span>  <span class="hl-number">20.1250</span>
&gt;&gt;&gt; trade.select(<span class="hl-string">"TICKER, month(date) as month, cumsum(VOL)"</span>).contextby(<span class="hl-string">"TICKER,month(date)"</span>).toDF()
      TICKER      month  cumsum_VOL
<span class="hl-number">0</span>       AMZN <span class="hl-number">1997</span>-<span class="hl-number">05</span>-<span class="hl-number">01</span>     <span class="hl-number">6029815</span>
<span class="hl-number">1</span>       AMZN <span class="hl-number">1997</span>-<span class="hl-number">05</span>-<span class="hl-number">01</span>     <span class="hl-number">7262041</span>
<span class="hl-number">2</span>       AMZN <span class="hl-number">1997</span>-<span class="hl-number">05</span>-<span class="hl-number">01</span>     <span class="hl-number">7774111</span>
<span class="hl-number">3</span>       AMZN <span class="hl-number">1997</span>-<span class="hl-number">05</span>-<span class="hl-number">01</span>     <span class="hl-number">8230468</span>
<span class="hl-number">4</span>       AMZN <span class="hl-number">1997</span>-<span class="hl-number">05</span>-<span class="hl-number">01</span>     <span class="hl-number">9807882</span>
...</pre><p class="- topic/p p"><code class="+ topic/ph pr-d/codeph ph codeph">contextby</code> 与 <code class="+ topic/ph pr-d/codeph ph codeph">having</code> 一起使用：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">&gt;&gt;&gt; trade.contextby(<span class="hl-string">'ticker'</span>).having(<span class="hl-string">"sum(VOL)&gt;40000000000"</span>).toDF()
     TICKER       date       VOL       PRC       BID       ASK
<span class="hl-number">0</span>      NVDA <span class="hl-number">1999</span>-<span class="hl-number">01</span>-<span class="hl-number">22</span>   <span class="hl-number">5702636</span>   <span class="hl-number">19.6875</span>   <span class="hl-number">19.6250</span>   <span class="hl-number">19.6875</span>
<span class="hl-number">1</span>      NVDA <span class="hl-number">1999</span>-<span class="hl-number">01</span>-<span class="hl-number">25</span>   <span class="hl-number">1074571</span>   <span class="hl-number">21.7500</span>   <span class="hl-number">21.7500</span>   <span class="hl-number">21.8750</span>
<span class="hl-number">2</span>      NVDA <span class="hl-number">1999</span>-<span class="hl-number">01</span>-<span class="hl-number">26</span>    <span class="hl-number">719199</span>   <span class="hl-number">20.0625</span>   <span class="hl-number">20.0625</span>   <span class="hl-number">20.1250</span>
<span class="hl-number">3</span>      NVDA <span class="hl-number">1999</span>-<span class="hl-number">01</span>-<span class="hl-number">27</span>    <span class="hl-number">510637</span>   <span class="hl-number">20.0000</span>   <span class="hl-number">19.8750</span>   <span class="hl-number">20.0000</span>
<span class="hl-number">4</span>      NVDA <span class="hl-number">1999</span>-<span class="hl-number">01</span>-<span class="hl-number">28</span>    <span class="hl-number">476094</span>   <span class="hl-number">19.9375</span>   <span class="hl-number">19.8750</span>   <span class="hl-number">20.0000</span>
...</pre></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title18" id="pivotby"><h3 class="- topic/title title topictitle3" id="ariaid-title18">pivotby</h3><div class="- topic/body body"><p class="- topic/p p"><code class="+ topic/ph pr-d/codeph ph codeph">pivotby</code> 是 DolphinDB 的独有功能，是对标准 SQL 语句的拓展。它将表中一列或多列的内容按照两个维度重新排列，亦可配合数据转换函数使用。详细使用请参考 <a class="- topic/xref xref" href="../../../../progr/sql/pivotBy.html">pivotby</a>。</p><p class="- topic/p p"><code class="+ topic/ph pr-d/codeph ph codeph">pivotby</code> 与 <code class="+ topic/ph pr-d/codeph ph codeph">select</code> 子句一起使用时返回一个表。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">&gt;&gt;&gt; trade = s.table(<span class="hl-string">"dfs://valuedb"</span>, <span class="hl-string">"trade"</span>)
&gt;&gt;&gt; t1 = trade.select(<span class="hl-string">"VOL"</span>).pivotby(<span class="hl-string">"TICKER"</span>, <span class="hl-string">"date"</span>)
&gt;&gt;&gt; t1.toDF()
  TICKER  <span class="hl-number">1997.05</span>.<span class="hl-number">15</span>  <span class="hl-number">1997.05</span>.<span class="hl-number">16</span>  ...  <span class="hl-number">2016.12</span>.<span class="hl-number">28</span>  <span class="hl-number">2016.12</span>.<span class="hl-number">29</span>  <span class="hl-number">2016.12</span>.<span class="hl-number">30</span>
<span class="hl-number">0</span>   AMZN   <span class="hl-number">6029815.0</span>   <span class="hl-number">1232226.0</span>  ...     <span class="hl-number">3301025</span>     <span class="hl-number">3158299</span>     <span class="hl-number">4139451</span>
<span class="hl-number">1</span>   NFLX         NaN         NaN  ...     <span class="hl-number">4388956</span>     <span class="hl-number">3444729</span>     <span class="hl-number">4455012</span>
<span class="hl-number">2</span>   NVDA         NaN         NaN  ...    <span class="hl-number">57384116</span>    <span class="hl-number">54384676</span>    <span class="hl-number">30323259</span></pre><p class="- topic/p p"><code class="+ topic/ph pr-d/codeph ph codeph">pivotby</code> 和 <code class="+ topic/ph pr-d/codeph ph codeph">exec</code> 语句一起使用时返回一个 DolphinDB 的矩阵对象。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">&gt;&gt;&gt; trade.<strong class="hl-keyword">exec</strong>(<span class="hl-string">"VOL"</span>).pivotby(<span class="hl-string">"TICKER"</span>, <span class="hl-string">"date"</span>).toDF()
[array([[ <span class="hl-number">6029815.</span>,  <span class="hl-number">1232226.</span>,   <span class="hl-number">512070.</span>, ...,  <span class="hl-number">3301025.</span>,  <span class="hl-number">3158299.</span>,
         <span class="hl-number">4139451.</span>],
       [      nan,       nan,       nan, ...,  <span class="hl-number">4388956.</span>,  <span class="hl-number">3444729.</span>,
         <span class="hl-number">4455012.</span>],
       [      nan,       nan,       nan, ..., <span class="hl-number">57384116.</span>, <span class="hl-number">54384676.</span>,
        <span class="hl-number">30323259.</span>]]), array([<span class="hl-string">'AMZN'</span>, <span class="hl-string">'NFLX'</span>, <span class="hl-string">'NVDA'</span>], dtype=object), array([<span class="hl-string">'1997-05-15T00:00:00.000000000'</span>, <span class="hl-string">'1997-05-16T00:00:00.000000000'</span>,
       <span class="hl-string">'1997-05-19T00:00:00.000000000'</span>, ...,
       <span class="hl-string">'2016-12-28T00:00:00.000000000'</span>, <span class="hl-string">'2016-12-29T00:00:00.000000000'</span>,
       <span class="hl-string">'2016-12-30T00:00:00.000000000'</span>], dtype=<span class="hl-string">'datetime64[ns]'</span>)]</pre></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title19" id="sort-csort"><h3 class="- topic/title title topictitle3" id="ariaid-title19">sort, csort</h3><div class="- topic/body body"><p class="- topic/p p">可使用 <code class="+ topic/ph pr-d/codeph ph codeph">csort</code> 关键字排序。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">&gt;&gt;&gt; trade = s.loadTable(<span class="hl-string">"trade"</span>, <span class="hl-string">"dfs://valuedb"</span>)
&gt;&gt;&gt; trade.contextby(<span class="hl-string">'ticker'</span>).csort(<span class="hl-string">'date desc'</span>).toDF()
      TICKER       date      VOL        PRC        BID        ASK
<span class="hl-number">0</span>       AMZN <span class="hl-number">2016</span>-<span class="hl-number">12</span>-<span class="hl-number">30</span>  <span class="hl-number">4139451</span>  <span class="hl-number">749.87000</span>  <span class="hl-number">750.02002</span>  <span class="hl-number">750.40002</span>
<span class="hl-number">1</span>       AMZN <span class="hl-number">2016</span>-<span class="hl-number">12</span>-<span class="hl-number">29</span>  <span class="hl-number">3158299</span>  <span class="hl-number">765.15002</span>  <span class="hl-number">764.66998</span>  <span class="hl-number">765.15997</span>
<span class="hl-number">2</span>       AMZN <span class="hl-number">2016</span>-<span class="hl-number">12</span>-<span class="hl-number">28</span>  <span class="hl-number">3301025</span>  <span class="hl-number">772.13000</span>  <span class="hl-number">771.92999</span>  <span class="hl-number">772.15997</span>
<span class="hl-number">3</span>       AMZN <span class="hl-number">2016</span>-<span class="hl-number">12</span>-<span class="hl-number">27</span>  <span class="hl-number">2638725</span>  <span class="hl-number">771.40002</span>  <span class="hl-number">771.40002</span>  <span class="hl-number">771.76001</span>
<span class="hl-number">4</span>       AMZN <span class="hl-number">2016</span>-<span class="hl-number">12</span>-<span class="hl-number">23</span>  <span class="hl-number">1981616</span>  <span class="hl-number">760.59003</span>  <span class="hl-number">760.33002</span>  <span class="hl-number">760.59003</span>
...</pre><p class="- topic/p p">除了在排序函数 <code class="+ topic/ph pr-d/codeph ph codeph">sort</code> 和 <code class="+ topic/ph pr-d/codeph ph codeph">csort</code> 中指定 asc 和 desc 关键字来决定排序顺序外，也可以通过传参的方式实现。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">sort(by, ascending=True)
csort(by, ascending=True)</pre><p class="- topic/p p">参数 <em class="+ topic/ph hi-d/i ph i">ascending</em> 表示是否进行升序排序，默认值为 True。可以通过传入一个 list 来定义多列的不同排序方式。如以下脚本：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">&gt;&gt;&gt; trade.select(<span class="hl-string">"*"</span>).contextby(<span class="hl-string">'ticker'</span>).csort([<span class="hl-string">"TICKER"</span>, <span class="hl-string">"VOL"</span>], True).limit(<span class="hl-number">5</span>).toDF()
   TICKER       date    VOL      PRC      BID     ASK
<span class="hl-number">0</span>    AMZN <span class="hl-number">1997</span>-<span class="hl-number">12</span>-<span class="hl-number">26</span>  <span class="hl-number">40721</span>  <span class="hl-number">54.2500</span>  <span class="hl-number">53.8750</span>  <span class="hl-number">54.625</span>
<span class="hl-number">1</span>    AMZN <span class="hl-number">1997</span>-<span class="hl-number">08</span>-<span class="hl-number">12</span>  <span class="hl-number">47939</span>  <span class="hl-number">26.3750</span>  <span class="hl-number">26.3750</span>  <span class="hl-number">26.750</span>
<span class="hl-number">2</span>    AMZN <span class="hl-number">1997</span>-<span class="hl-number">07</span>-<span class="hl-number">21</span>  <span class="hl-number">48325</span>  <span class="hl-number">26.1875</span>  <span class="hl-number">26.1250</span>  <span class="hl-number">26.250</span>
<span class="hl-number">3</span>    AMZN <span class="hl-number">1997</span>-<span class="hl-number">08</span>-<span class="hl-number">13</span>  <span class="hl-number">49690</span>  <span class="hl-number">26.3750</span>  <span class="hl-number">26.0000</span>  <span class="hl-number">26.625</span>
<span class="hl-number">4</span>    AMZN <span class="hl-number">1997</span>-<span class="hl-number">06</span>-<span class="hl-number">02</span>  <span class="hl-number">49764</span>  <span class="hl-number">18.1250</span>  <span class="hl-number">18.1250</span>  <span class="hl-number">18.375</span>
<span class="hl-number">5</span>    NFLX <span class="hl-number">2002</span>-<span class="hl-number">09</span>-<span class="hl-number">05</span>  <span class="hl-number">20725</span>  <span class="hl-number">12.8500</span>  <span class="hl-number">12.8500</span>  <span class="hl-number">12.950</span>
<span class="hl-number">6</span>    NFLX <span class="hl-number">2002</span>-<span class="hl-number">11</span>-<span class="hl-number">11</span>  <span class="hl-number">26824</span>   <span class="hl-number">8.4100</span>   <span class="hl-number">8.3000</span>   <span class="hl-number">8.400</span>
<span class="hl-number">7</span>    NFLX <span class="hl-number">2002</span>-<span class="hl-number">09</span>-<span class="hl-number">04</span>  <span class="hl-number">27319</span>  <span class="hl-number">13.0000</span>  <span class="hl-number">12.8200</span>  <span class="hl-number">13.000</span>
<span class="hl-number">8</span>    NFLX <span class="hl-number">2002</span>-<span class="hl-number">06</span>-<span class="hl-number">10</span>  <span class="hl-number">35421</span>  <span class="hl-number">16.1910</span>  <span class="hl-number">16.1900</span>  <span class="hl-number">16.300</span>
<span class="hl-number">9</span>    NFLX <span class="hl-number">2002</span>-<span class="hl-number">09</span>-<span class="hl-number">06</span>  <span class="hl-number">54951</span>  <span class="hl-number">12.8000</span>  <span class="hl-number">12.7900</span>  <span class="hl-number">12.800</span>
<span class="hl-number">10</span>   NVDA <span class="hl-number">1999</span>-<span class="hl-number">05</span>-<span class="hl-number">10</span>  <span class="hl-number">41250</span>  <span class="hl-number">17.5000</span>  <span class="hl-number">17.5000</span>  <span class="hl-number">17.750</span>
<span class="hl-number">11</span>   NVDA <span class="hl-number">1999</span>-<span class="hl-number">05</span>-<span class="hl-number">07</span>  <span class="hl-number">52310</span>  <span class="hl-number">17.5000</span>  <span class="hl-number">17.3750</span>  <span class="hl-number">17.625</span>
<span class="hl-number">12</span>   NVDA <span class="hl-number">1999</span>-<span class="hl-number">05</span>-<span class="hl-number">14</span>  <span class="hl-number">59807</span>  <span class="hl-number">18.0000</span>  <span class="hl-number">17.7500</span>  <span class="hl-number">18.000</span>
<span class="hl-number">13</span>   NVDA <span class="hl-number">1999</span>-<span class="hl-number">04</span>-<span class="hl-number">01</span>  <span class="hl-number">63997</span>  <span class="hl-number">20.5000</span>  <span class="hl-number">20.1875</span>  <span class="hl-number">20.500</span>
<span class="hl-number">14</span>   NVDA <span class="hl-number">1999</span>-<span class="hl-number">04</span>-<span class="hl-number">19</span>  <span class="hl-number">65940</span>  <span class="hl-number">19.0000</span>  <span class="hl-number">19.0000</span>  <span class="hl-number">19.125</span>
&gt;&gt;&gt; trade.select(<span class="hl-string">"*"</span>).contextby(<span class="hl-string">'ticker'</span>).csort([<span class="hl-string">"TICKER"</span>, <span class="hl-string">"VOL"</span>], [True, False]).limit(<span class="hl-number">5</span>).toDF()
   TICKER       date        VOL       PRC     BID       ASK
<span class="hl-number">0</span>    AMZN <span class="hl-number">2007</span>-<span class="hl-number">04</span>-<span class="hl-number">25</span>  <span class="hl-number">104463043</span>   <span class="hl-number">56.8100</span>   <span class="hl-number">56.80</span>   <span class="hl-number">56.8100</span>
<span class="hl-number">1</span>    AMZN <span class="hl-number">1999</span>-<span class="hl-number">09</span>-<span class="hl-number">29</span>   <span class="hl-number">80380734</span>   <span class="hl-number">80.7500</span>   <span class="hl-number">80.75</span>   <span class="hl-number">80.8125</span>
<span class="hl-number">2</span>    AMZN <span class="hl-number">2006</span>-<span class="hl-number">07</span>-<span class="hl-number">26</span>   <span class="hl-number">76996899</span>   <span class="hl-number">26.2600</span>   <span class="hl-number">26.17</span>   <span class="hl-number">26.1800</span>
<span class="hl-number">3</span>    AMZN <span class="hl-number">2007</span>-<span class="hl-number">04</span>-<span class="hl-number">26</span>   <span class="hl-number">62451660</span>   <span class="hl-number">62.7810</span>   <span class="hl-number">62.77</span>   <span class="hl-number">62.8300</span>
<span class="hl-number">4</span>    AMZN <span class="hl-number">2005</span>-<span class="hl-number">02</span>-<span class="hl-number">03</span>   <span class="hl-number">60580703</span>   <span class="hl-number">35.7500</span>   <span class="hl-number">35.74</span>   <span class="hl-number">35.7300</span>
<span class="hl-number">5</span>    NFLX <span class="hl-number">2015</span>-<span class="hl-number">07</span>-<span class="hl-number">16</span>   <span class="hl-number">63461015</span>  <span class="hl-number">115.8100</span>  <span class="hl-number">115.85</span>  <span class="hl-number">115.8600</span>
<span class="hl-number">6</span>    NFLX <span class="hl-number">2015</span>-<span class="hl-number">08</span>-<span class="hl-number">24</span>   <span class="hl-number">59952448</span>   <span class="hl-number">96.8800</span>   <span class="hl-number">96.85</span>   <span class="hl-number">96.8800</span>
<span class="hl-number">7</span>    NFLX <span class="hl-number">2016</span>-<span class="hl-number">04</span>-<span class="hl-number">19</span>   <span class="hl-number">55728765</span>   <span class="hl-number">94.3400</span>   <span class="hl-number">94.30</span>   <span class="hl-number">94.3100</span>
<span class="hl-number">8</span>    NFLX <span class="hl-number">2016</span>-<span class="hl-number">07</span>-<span class="hl-number">19</span>   <span class="hl-number">55685209</span>   <span class="hl-number">85.8400</span>   <span class="hl-number">85.81</span>   <span class="hl-number">85.8300</span>
<span class="hl-number">9</span>    NFLX <span class="hl-number">2016</span>-<span class="hl-number">01</span>-<span class="hl-number">20</span>   <span class="hl-number">53009419</span>  <span class="hl-number">107.7400</span>  <span class="hl-number">107.73</span>  <span class="hl-number">107.7800</span>
<span class="hl-number">10</span>   NVDA <span class="hl-number">2011</span>-<span class="hl-number">01</span>-<span class="hl-number">06</span>   <span class="hl-number">87693472</span>   <span class="hl-number">19.3300</span>   <span class="hl-number">19.33</span>   <span class="hl-number">19.3400</span>
<span class="hl-number">11</span>   NVDA <span class="hl-number">2011</span>-<span class="hl-number">02</span>-<span class="hl-number">17</span>   <span class="hl-number">87117555</span>   <span class="hl-number">25.6800</span>   <span class="hl-number">25.68</span>   <span class="hl-number">25.7000</span>
<span class="hl-number">12</span>   NVDA <span class="hl-number">2011</span>-<span class="hl-number">01</span>-<span class="hl-number">12</span>   <span class="hl-number">86197484</span>   <span class="hl-number">23.3525</span>   <span class="hl-number">23.34</span>   <span class="hl-number">23.3600</span>
<span class="hl-number">13</span>   NVDA <span class="hl-number">2011</span>-<span class="hl-number">08</span>-<span class="hl-number">12</span>   <span class="hl-number">80488616</span>   <span class="hl-number">12.8800</span>   <span class="hl-number">12.86</span>   <span class="hl-number">12.8700</span>
<span class="hl-number">14</span>   NVDA <span class="hl-number">2003</span>-<span class="hl-number">05</span>-<span class="hl-number">09</span>   <span class="hl-number">77604776</span>   <span class="hl-number">21.3700</span>   <span class="hl-number">21.39</span>   <span class="hl-number">21.3700</span></pre></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title20" id="top-limit"><h3 class="- topic/title title topictitle3" id="ariaid-title20">top, limit</h3><div class="- topic/body body"><p class="- topic/p p">top 用于取表中的前 n 条记录。详细使用请参考 <a class="- topic/xref xref" href="../../../../progr/sql/top.html">top</a>。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">&gt;&gt;&gt; trade = s.table(<span class="hl-string">"dfs://valuedb"</span>, <span class="hl-string">"trade"</span>)
&gt;&gt;&gt; trade.top(<span class="hl-number">5</span>).toDF()
  TICKER       date      VOL     PRC     BID     ASK
<span class="hl-number">0</span>   AMZN <span class="hl-number">1997</span>-<span class="hl-number">05</span>-<span class="hl-number">15</span>  <span class="hl-number">6029815</span>  <span class="hl-number">23.500</span>  <span class="hl-number">23.500</span>  <span class="hl-number">23.625</span>
<span class="hl-number">1</span>   AMZN <span class="hl-number">1997</span>-<span class="hl-number">05</span>-<span class="hl-number">16</span>  <span class="hl-number">1232226</span>  <span class="hl-number">20.750</span>  <span class="hl-number">20.500</span>  <span class="hl-number">21.000</span>
<span class="hl-number">2</span>   AMZN <span class="hl-number">1997</span>-<span class="hl-number">05</span>-<span class="hl-number">19</span>   <span class="hl-number">512070</span>  <span class="hl-number">20.500</span>  <span class="hl-number">20.500</span>  <span class="hl-number">20.625</span>
<span class="hl-number">3</span>   AMZN <span class="hl-number">1997</span>-<span class="hl-number">05</span>-<span class="hl-number">20</span>   <span class="hl-number">456357</span>  <span class="hl-number">19.625</span>  <span class="hl-number">19.625</span>  <span class="hl-number">19.750</span>
<span class="hl-number">4</span>   AMZN <span class="hl-number">1997</span>-<span class="hl-number">05</span>-<span class="hl-number">21</span>  <span class="hl-number">1577414</span>  <span class="hl-number">17.125</span>  <span class="hl-number">17.125</span>  <span class="hl-number">17.250</span></pre><p class="- topic/p p">limit 子句和 top 子句功能类似。两者的区别在于：</p><ul class="- topic/ul ul"><li class="- topic/li li">top 子句中的整型常量不能为负数。在与 context by 子句一同使用时，limit 子句的标量值可以为负整数，返回每个组最后指定数目的记录。其他情况 limit 子句标量值为非负整数。</li><li class="- topic/li li">可使用 limit 子句从某行开始选择一定数量的行。</li></ul><p class="- topic/p p">limit 的详细使用请参考 <a class="- topic/xref xref" href="../../../../progr/sql/limit.html">limit</a>。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">&gt;&gt;&gt; trade.select(<span class="hl-string">"*"</span>).contextby(<span class="hl-string">'ticker'</span>).limit(-<span class="hl-number">2</span>).toDF()
  TICKER       date       VOL        PRC        BID        ASK
<span class="hl-number">0</span>   AMZN <span class="hl-number">2016</span>-<span class="hl-number">12</span>-<span class="hl-number">29</span>   <span class="hl-number">3158299</span>  <span class="hl-number">765.15002</span>  <span class="hl-number">764.66998</span>  <span class="hl-number">765.15997</span>
<span class="hl-number">1</span>   AMZN <span class="hl-number">2016</span>-<span class="hl-number">12</span>-<span class="hl-number">30</span>   <span class="hl-number">4139451</span>  <span class="hl-number">749.87000</span>  <span class="hl-number">750.02002</span>  <span class="hl-number">750.40002</span>
<span class="hl-number">2</span>   NFLX <span class="hl-number">2016</span>-<span class="hl-number">12</span>-<span class="hl-number">29</span>   <span class="hl-number">3444729</span>  <span class="hl-number">125.33000</span>  <span class="hl-number">125.31000</span>  <span class="hl-number">125.33000</span>
<span class="hl-number">3</span>   NFLX <span class="hl-number">2016</span>-<span class="hl-number">12</span>-<span class="hl-number">30</span>   <span class="hl-number">4455012</span>  <span class="hl-number">123.80000</span>  <span class="hl-number">123.80000</span>  <span class="hl-number">123.83000</span>
<span class="hl-number">4</span>   NVDA <span class="hl-number">2016</span>-<span class="hl-number">12</span>-<span class="hl-number">29</span>  <span class="hl-number">54384676</span>  <span class="hl-number">111.43000</span>  <span class="hl-number">111.26000</span>  <span class="hl-number">111.42000</span>
<span class="hl-number">5</span>   NVDA <span class="hl-number">2016</span>-<span class="hl-number">12</span>-<span class="hl-number">30</span>  <span class="hl-number">30323259</span>  <span class="hl-number">106.74000</span>  <span class="hl-number">106.73000</span>  <span class="hl-number">106.75000</span></pre><pre class="+ topic/pre pr-d/codeblock pre codeblock python">&gt;&gt;&gt; trade.select(<span class="hl-string">"*"</span>).limit([<span class="hl-number">2</span>, <span class="hl-number">5</span>]).toDF()
  TICKER       date      VOL     PRC     BID     ASK
<span class="hl-number">0</span>   AMZN <span class="hl-number">1997</span>-<span class="hl-number">05</span>-<span class="hl-number">19</span>   <span class="hl-number">512070</span>  <span class="hl-number">20.500</span>  <span class="hl-number">20.500</span>  <span class="hl-number">20.625</span>
<span class="hl-number">1</span>   AMZN <span class="hl-number">1997</span>-<span class="hl-number">05</span>-<span class="hl-number">20</span>   <span class="hl-number">456357</span>  <span class="hl-number">19.625</span>  <span class="hl-number">19.625</span>  <span class="hl-number">19.750</span>
<span class="hl-number">2</span>   AMZN <span class="hl-number">1997</span>-<span class="hl-number">05</span>-<span class="hl-number">21</span>  <span class="hl-number">1577414</span>  <span class="hl-number">17.125</span>  <span class="hl-number">17.125</span>  <span class="hl-number">17.250</span>
<span class="hl-number">3</span>   AMZN <span class="hl-number">1997</span>-<span class="hl-number">05</span>-<span class="hl-number">22</span>   <span class="hl-number">983855</span>  <span class="hl-number">16.750</span>  <span class="hl-number">16.625</span>  <span class="hl-number">16.750</span>
<span class="hl-number">4</span>   AMZN <span class="hl-number">1997</span>-<span class="hl-number">05</span>-<span class="hl-number">23</span>  <span class="hl-number">1330026</span>  <span class="hl-number">18.000</span>  <span class="hl-number">18.000</span>  <span class="hl-number">18.125</span></pre></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title21" id="merge-merge-asof-merge-window-和-merge-cross"><h3 class="- topic/title title topictitle3" id="ariaid-title21">merge, merge_asof, merge_window 和 merge_cross</h3><div class="- topic/body body"><p class="- topic/p p">merge 用于内部连接、左连接、左半连接和外部连接，merge_asof 为 asof join，merge_window 为窗口连接。</p></div><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title22" id="merge"><h4 class="- topic/title title topictitle4" id="ariaid-title22">merge</h4><div class="- topic/body body"><p class="- topic/p p">merge 的参数包括两个索引列和一个字符串参数。如果两个连接列的名称相同，则使用 <em class="+ topic/ph hi-d/i ph i">on</em> 参数指定连接列；如果两个连接列的名称不同，使用 <em class="+ topic/ph hi-d/i ph i">left_on</em> 和 <em class="+ topic/ph hi-d/i ph i">right_on</em> 参数指定连接列。可选参数 <em class="+ topic/ph hi-d/i ph i">how</em> 表示表连接的类型，默认的连接类型为内部连接。</p><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">当连接列名称相同时，使用示例如下：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">&gt;&gt;&gt; trade = s.table(<span class="hl-string">"dfs://valuedb"</span>, <span class="hl-string">"trade"</span>)
&gt;&gt;&gt; t1 = s.table(data={
...     <span class="hl-string">'TICKER'</span>: [<span class="hl-string">'AMZN'</span>, <span class="hl-string">'AMZN'</span>, <span class="hl-string">'AMZN'</span>], 
...     <span class="hl-string">'date'</span>: np.array([<span class="hl-string">'2015-12-31'</span>, <span class="hl-string">'2015-12-30'</span>, <span class="hl-string">'2015-12-29'</span>], dtype=<span class="hl-string">'datetime64[D]'</span>), 
...     <span class="hl-string">'open'</span>: [<span class="hl-number">695</span>, <span class="hl-number">685</span>, <span class="hl-number">674</span>],
... })
...
&gt;&gt;&gt; t1 = t1.select(<span class="hl-string">"TICKER, date(date) as date, open"</span>)
&gt;&gt;&gt; trade.merge(t1,on=[<span class="hl-string">"TICKER"</span>,<span class="hl-string">"date"</span>]).toDF()
  TICKER       date      VOL        PRC        BID        ASK  open
<span class="hl-number">0</span>   AMZN <span class="hl-number">2015</span>-<span class="hl-number">12</span>-<span class="hl-number">29</span>  <span class="hl-number">5734996</span>  <span class="hl-number">693.96997</span>  <span class="hl-number">693.96997</span>  <span class="hl-number">694.20001</span>   <span class="hl-number">674</span>
<span class="hl-number">1</span>   AMZN <span class="hl-number">2015</span>-<span class="hl-number">12</span>-<span class="hl-number">30</span>  <span class="hl-number">3519303</span>  <span class="hl-number">689.07001</span>  <span class="hl-number">689.07001</span>  <span class="hl-number">689.09998</span>   <span class="hl-number">685</span>
<span class="hl-number">2</span>   AMZN <span class="hl-number">2015</span>-<span class="hl-number">12</span>-<span class="hl-number">31</span>  <span class="hl-number">3749860</span>  <span class="hl-number">675.89001</span>  <span class="hl-number">675.85999</span>  <span class="hl-number">675.94000</span>   <span class="hl-number">695</span></pre></li><li class="- topic/li li"><p class="- topic/p p">当连接列名称不相同时，需要指定 <em class="+ topic/ph hi-d/i ph i">left_on</em> 参数和 <em class="+ topic/ph hi-d/i ph i">right_on</em> 参数：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">&gt;&gt;&gt; trade = s.table(<span class="hl-string">"dfs://valuedb"</span>, <span class="hl-string">"trade"</span>)
&gt;&gt;&gt; t1 = s.table(data={
...     <span class="hl-string">'TICKER'</span>: [<span class="hl-string">'AMZN'</span>, <span class="hl-string">'AMZN'</span>, <span class="hl-string">'AMZN'</span>], 
...     <span class="hl-string">'date'</span>: np.array([<span class="hl-string">'2015-12-31'</span>, <span class="hl-string">'2015-12-30'</span>, <span class="hl-string">'2015-12-29'</span>], dtype=<span class="hl-string">'datetime64[D]'</span>), 
...     <span class="hl-string">'open'</span>: [<span class="hl-number">695</span>, <span class="hl-number">685</span>, <span class="hl-number">674</span>],
... })
...
&gt;&gt;&gt; t1 = t1.select(<span class="hl-string">"TICKER as TICKER1, date(date) as date1, open"</span>)
&gt;&gt;&gt; trade.merge(t1, left_on=[<span class="hl-string">"TICKER"</span>,<span class="hl-string">"date"</span>], right_on=[<span class="hl-string">"TICKER1"</span>, <span class="hl-string">"date1"</span>]).toDF()
  TICKER       date      VOL        PRC        BID        ASK  open
<span class="hl-number">0</span>   AMZN <span class="hl-number">2015</span>-<span class="hl-number">12</span>-<span class="hl-number">29</span>  <span class="hl-number">5734996</span>  <span class="hl-number">693.96997</span>  <span class="hl-number">693.96997</span>  <span class="hl-number">694.20001</span>   <span class="hl-number">674</span>
<span class="hl-number">1</span>   AMZN <span class="hl-number">2015</span>-<span class="hl-number">12</span>-<span class="hl-number">30</span>  <span class="hl-number">3519303</span>  <span class="hl-number">689.07001</span>  <span class="hl-number">689.07001</span>  <span class="hl-number">689.09998</span>   <span class="hl-number">685</span>
<span class="hl-number">2</span>   AMZN <span class="hl-number">2015</span>-<span class="hl-number">12</span>-<span class="hl-number">31</span>  <span class="hl-number">3749860</span>  <span class="hl-number">675.89001</span>  <span class="hl-number">675.85999</span>  <span class="hl-number">675.94000</span>   <span class="hl-number">695</span></pre></li><li class="- topic/li li"><p class="- topic/p p">当要选择左连接时，把 <em class="+ topic/ph hi-d/i ph i">how</em> 参数设置为 <code class="+ topic/ph pr-d/codeph ph codeph">left</code>：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">&gt;&gt;&gt; trade = s.table(<span class="hl-string">"dfs://valuedb"</span>, <span class="hl-string">"trade"</span>)
&gt;&gt;&gt; t1 = s.table(data={
...     <span class="hl-string">'TICKER'</span>: [<span class="hl-string">'AMZN'</span>, <span class="hl-string">'AMZN'</span>, <span class="hl-string">'AMZN'</span>], 
...     <span class="hl-string">'date'</span>: np.array([<span class="hl-string">'2015-12-31'</span>, <span class="hl-string">'2015-12-30'</span>, <span class="hl-string">'2015-12-29'</span>], dtype=<span class="hl-string">'datetime64[D]'</span>), 
...     <span class="hl-string">'open'</span>: [<span class="hl-number">695</span>, <span class="hl-number">685</span>, <span class="hl-number">674</span>],
... })
...
&gt;&gt;&gt; t1 = t1.select(<span class="hl-string">"TICKER, date(date) as date, open"</span>)
&gt;&gt;&gt; trade.merge(t1,how=<span class="hl-string">"left"</span>, on=[<span class="hl-string">"TICKER"</span>,<span class="hl-string">"date"</span>]).where(<span class="hl-string">'TICKER=`AMZN'</span>).where(<span class="hl-string">'2015.12.23&lt;=date&lt;=2015.12.31'</span>).toDF()
  TICKER       date      VOL        PRC        BID        ASK   open
<span class="hl-number">0</span>   AMZN <span class="hl-number">2015</span>-<span class="hl-number">12</span>-<span class="hl-number">23</span>  <span class="hl-number">2722922</span>  <span class="hl-number">663.70001</span>  <span class="hl-number">663.48999</span>  <span class="hl-number">663.71002</span>    NaN
<span class="hl-number">1</span>   AMZN <span class="hl-number">2015</span>-<span class="hl-number">12</span>-<span class="hl-number">24</span>  <span class="hl-number">1092980</span>  <span class="hl-number">662.78998</span>  <span class="hl-number">662.56000</span>  <span class="hl-number">662.79999</span>    NaN
<span class="hl-number">2</span>   AMZN <span class="hl-number">2015</span>-<span class="hl-number">12</span>-<span class="hl-number">28</span>  <span class="hl-number">3783555</span>  <span class="hl-number">675.20001</span>  <span class="hl-number">675.00000</span>  <span class="hl-number">675.21002</span>    NaN
<span class="hl-number">3</span>   AMZN <span class="hl-number">2015</span>-<span class="hl-number">12</span>-<span class="hl-number">29</span>  <span class="hl-number">5734996</span>  <span class="hl-number">693.96997</span>  <span class="hl-number">693.96997</span>  <span class="hl-number">694.20001</span>  <span class="hl-number">674.0</span>
<span class="hl-number">4</span>   AMZN <span class="hl-number">2015</span>-<span class="hl-number">12</span>-<span class="hl-number">30</span>  <span class="hl-number">3519303</span>  <span class="hl-number">689.07001</span>  <span class="hl-number">689.07001</span>  <span class="hl-number">689.09998</span>  <span class="hl-number">685.0</span>
<span class="hl-number">5</span>   AMZN <span class="hl-number">2015</span>-<span class="hl-number">12</span>-<span class="hl-number">31</span>  <span class="hl-number">3749860</span>  <span class="hl-number">675.89001</span>  <span class="hl-number">675.85999</span>  <span class="hl-number">675.94000</span>  <span class="hl-number">695.0</span></pre></li><li class="- topic/li li"><p class="- topic/p p">当要选择外部连接时，把 <em class="+ topic/ph hi-d/i ph i">how</em> 参数设置为 <code class="+ topic/ph pr-d/codeph ph codeph">outer</code>：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">&gt;&gt;&gt; t1 = s.table(data={<span class="hl-string">'TICKER'</span>: [<span class="hl-string">'AMZN'</span>, <span class="hl-string">'AMZN'</span>, <span class="hl-string">'NFLX'</span>], <span class="hl-string">'date'</span>: [<span class="hl-string">'2015.12.29'</span>, <span class="hl-string">'2015.12.30'</span>, <span class="hl-string">'2015.12.31'</span>], <span class="hl-string">'open'</span>: [<span class="hl-number">674</span>, <span class="hl-number">685</span>, <span class="hl-number">942</span>]})
&gt;&gt;&gt; t2 = s.table(data={<span class="hl-string">'TICKER'</span>: [<span class="hl-string">'AMZN'</span>, <span class="hl-string">'NFLX'</span>, <span class="hl-string">'NFLX'</span>], <span class="hl-string">'date'</span>: [<span class="hl-string">'2015.12.29'</span>, <span class="hl-string">'2015.12.30'</span>, <span class="hl-string">'2015.12.31'</span>], <span class="hl-string">'close'</span>: [<span class="hl-number">690</span>, <span class="hl-number">936</span>, <span class="hl-number">951</span>]})
&gt;&gt;&gt; t1.merge(t2, how=<span class="hl-string">"outer"</span>, on=[<span class="hl-string">"TICKER"</span>,<span class="hl-string">"date"</span>]).toDF()
  TICKER        date   open tmp_TICKER    tmp_date  close
<span class="hl-number">0</span>   AMZN  <span class="hl-number">2015.12</span>.<span class="hl-number">29</span>  <span class="hl-number">674.0</span>       AMZN  <span class="hl-number">2015.12</span>.<span class="hl-number">29</span>  <span class="hl-number">690.0</span>
<span class="hl-number">1</span>   AMZN  <span class="hl-number">2015.12</span>.<span class="hl-number">30</span>  <span class="hl-number">685.0</span>                           NaN
<span class="hl-number">2</span>   NFLX  <span class="hl-number">2015.12</span>.<span class="hl-number">31</span>  <span class="hl-number">942.0</span>       NFLX  <span class="hl-number">2015.12</span>.<span class="hl-number">31</span>  <span class="hl-number">951.0</span>
<span class="hl-number">3</span>                       NaN       NFLX  <span class="hl-number">2015.12</span>.<span class="hl-number">30</span>  <span class="hl-number">936.0</span></pre></li></ol><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注意：</strong> 分区表只能与分区表进行外部连接，内存表只能与内存表进行外部连接。</p></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title23" id="merge-asof"><h4 class="- topic/title title topictitle4" id="ariaid-title23">merge_asof</h4><div class="- topic/body body"><p class="- topic/p p">merge_asof 对应 DolphinDB 中的 <a class="- topic/xref xref" href="../../../../progr/sql/asofjoin.html">asof join (aj)</a>。asof join 与 left join 非常相似，主要有以下区别：</p><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">asof join 的最后一个连接列通常是时间类型。对于左表中某行的时间 t，在右表最后一个连接列之外的其它连接列一致的记录中，如果右表没有与 t 对应的时间，asof join 会取右表中 t 之前的最近时间对应的记录；如果有多个相同的时间，会取最后一个时间对应的记录。</p></li><li class="- topic/li li"><p class="- topic/p p">如果只有一个连接列，右表必须按照连接列排好序。如果有多个连接列，右表必须在其它连接列决定的每个组内根据最后一个连接列排好序。如果右表不满足这些条件，计算结果将会不符合预期。右表不需要按照其他连接列排序，左表不需要排序。</p></li></ol><p class="- topic/p p">本节与下节的例子使用了 <a class="- topic/xref xref" href="../../data/trades.csv">trades.csv</a> 和 <a class="- topic/xref xref" href="../../data/quotes.csv">quotes.csv</a>，它们含有 NYSE 网站下载的 AAPL 和 FB 的 2016 年 10 月 24 日的交易与报价数据。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">&gt;&gt;&gt; dbPath = <span class="hl-string">"dfs://tickDB"</span>
&gt;&gt;&gt; <strong class="hl-keyword">if</strong> s.existsDatabase(dbPath):
...     s.dropDatabase(dbPath)
... 
&gt;&gt;&gt; s.database(partitionType=keys.VALUE, partitions=[<span class="hl-string">"AAPL"</span>,<span class="hl-string">"FB"</span>], dbPath=dbPath)
&gt;&gt;&gt; trades = s.loadTextEx(dbPath, tableName=<span class="hl-string">'trades'</span>, partitionColumns=[<span class="hl-string">"Symbol"</span>], remoteFilePath=WORK_DIR+<span class="hl-string">"/trades.csv"</span>)
&gt;&gt;&gt; quotes = s.loadTextEx(dbPath, tableName=<span class="hl-string">'quotes'</span>, partitionColumns=[<span class="hl-string">"Symbol"</span>], remoteFilePath=WORK_DIR+<span class="hl-string">"/quotes.csv"</span>)
&gt;&gt;&gt; trades.top(<span class="hl-number">5</span>).toDF()
                        Time  Exchange  Symbol  Trade_Volume  Trade_Price
<span class="hl-number">0</span> <span class="hl-number">1970</span>-<span class="hl-number">01</span>-<span class="hl-number">01</span> <span class="hl-number">08</span>:<span class="hl-number">00</span>:<span class="hl-number">00.022239</span>        <span class="hl-number">75</span>    AAPL           <span class="hl-number">300</span>        <span class="hl-number">27.00</span>
<span class="hl-number">1</span> <span class="hl-number">1970</span>-<span class="hl-number">01</span>-<span class="hl-number">01</span> <span class="hl-number">08</span>:<span class="hl-number">00</span>:<span class="hl-number">00.022287</span>        <span class="hl-number">75</span>    AAPL           <span class="hl-number">500</span>        <span class="hl-number">27.25</span>
<span class="hl-number">2</span> <span class="hl-number">1970</span>-<span class="hl-number">01</span>-<span class="hl-number">01</span> <span class="hl-number">08</span>:<span class="hl-number">00</span>:<span class="hl-number">00.022317</span>        <span class="hl-number">75</span>    AAPL           <span class="hl-number">335</span>        <span class="hl-number">27.26</span>
<span class="hl-number">3</span> <span class="hl-number">1970</span>-<span class="hl-number">01</span>-<span class="hl-number">01</span> <span class="hl-number">08</span>:<span class="hl-number">00</span>:<span class="hl-number">00.022341</span>        <span class="hl-number">75</span>    AAPL           <span class="hl-number">100</span>        <span class="hl-number">27.27</span>
<span class="hl-number">4</span> <span class="hl-number">1970</span>-<span class="hl-number">01</span>-<span class="hl-number">01</span> <span class="hl-number">08</span>:<span class="hl-number">00</span>:<span class="hl-number">00.022368</span>        <span class="hl-number">75</span>    AAPL            <span class="hl-number">31</span>        <span class="hl-number">27.40</span>
&gt;&gt;&gt; quotes.where(<span class="hl-string">"second(Time)&gt;=09:29:59"</span>).top(<span class="hl-number">5</span>).toDF()
                         Time  Exchange  Symbol  Bid_Price  Bid_Size  Offer_Price  Offer_Size
<span class="hl-number">0</span>  <span class="hl-number">1970</span>-<span class="hl-number">01</span>-<span class="hl-number">01</span> <span class="hl-number">09</span>:<span class="hl-number">30</span>:<span class="hl-number">00.005868</span>        <span class="hl-number">90</span>    AAPL      <span class="hl-number">26.89</span>         <span class="hl-number">1</span>        <span class="hl-number">27.10</span>           <span class="hl-number">6</span>
<span class="hl-number">1</span>  <span class="hl-number">1970</span>-<span class="hl-number">01</span>-<span class="hl-number">01</span> <span class="hl-number">09</span>:<span class="hl-number">30</span>:<span class="hl-number">00.011058</span>        <span class="hl-number">90</span>    AAPL      <span class="hl-number">26.89</span>        <span class="hl-number">11</span>        <span class="hl-number">27.10</span>           <span class="hl-number">6</span>
<span class="hl-number">2</span>  <span class="hl-number">1970</span>-<span class="hl-number">01</span>-<span class="hl-number">01</span> <span class="hl-number">09</span>:<span class="hl-number">30</span>:<span class="hl-number">00.031523</span>        <span class="hl-number">90</span>    AAPL      <span class="hl-number">26.89</span>        <span class="hl-number">13</span>        <span class="hl-number">27.10</span>           <span class="hl-number">6</span>
<span class="hl-number">3</span>  <span class="hl-number">1970</span>-<span class="hl-number">01</span>-<span class="hl-number">01</span> <span class="hl-number">09</span>:<span class="hl-number">30</span>:<span class="hl-number">00.284623</span>        <span class="hl-number">80</span>    AAPL      <span class="hl-number">26.89</span>         <span class="hl-number">8</span>        <span class="hl-number">26.98</span>           <span class="hl-number">8</span>
<span class="hl-number">4</span>  <span class="hl-number">1970</span>-<span class="hl-number">01</span>-<span class="hl-number">01</span> <span class="hl-number">09</span>:<span class="hl-number">30</span>:<span class="hl-number">00.454066</span>        <span class="hl-number">80</span>    AAPL      <span class="hl-number">26.89</span>         <span class="hl-number">8</span>        <span class="hl-number">26.98</span>           <span class="hl-number">1</span>
&gt;&gt;&gt; trades.merge_asof(quotes,on=[<span class="hl-string">"Symbol"</span>,<span class="hl-string">"Time"</span>]).select([<span class="hl-string">"Symbol"</span>,<span class="hl-string">"Time"</span>,<span class="hl-string">"Trade_Volume"</span>,<span class="hl-string">"Trade_Price"</span>,<span class="hl-string">"Bid_Price"</span>, <span class="hl-string">"Bid_Size"</span>,<span class="hl-string">"Offer_Price"</span>, <span class="hl-string">"Offer_Size"</span>]).top(<span class="hl-number">5</span>).toDF()
  Symbol                        Time          Trade_Volume  Trade_Price  Bid_Price  Bid_Size  \
<span class="hl-number">0</span>   AAPL  <span class="hl-number">1970</span>-<span class="hl-number">01</span>-<span class="hl-number">01</span> <span class="hl-number">08</span>:<span class="hl-number">00</span>:<span class="hl-number">00.022239</span>                   <span class="hl-number">300</span>        <span class="hl-number">27.00</span>       <span class="hl-number">26.9</span>         <span class="hl-number">1</span>
<span class="hl-number">1</span>   AAPL  <span class="hl-number">1970</span>-<span class="hl-number">01</span>-<span class="hl-number">01</span> <span class="hl-number">08</span>:<span class="hl-number">00</span>:<span class="hl-number">00.022287</span>                   <span class="hl-number">500</span>        <span class="hl-number">27.25</span>       <span class="hl-number">26.9</span>         <span class="hl-number">1</span>
<span class="hl-number">2</span>   AAPL  <span class="hl-number">1970</span>-<span class="hl-number">01</span>-<span class="hl-number">01</span> <span class="hl-number">08</span>:<span class="hl-number">00</span>:<span class="hl-number">00.022317</span>                   <span class="hl-number">335</span>        <span class="hl-number">27.26</span>       <span class="hl-number">26.9</span>         <span class="hl-number">1</span>
<span class="hl-number">3</span>   AAPL  <span class="hl-number">1970</span>-<span class="hl-number">01</span>-<span class="hl-number">01</span> <span class="hl-number">08</span>:<span class="hl-number">00</span>:<span class="hl-number">00.022341</span>                   <span class="hl-number">100</span>        <span class="hl-number">27.27</span>       <span class="hl-number">26.9</span>         <span class="hl-number">1</span>
<span class="hl-number">4</span>   AAPL  <span class="hl-number">1970</span>-<span class="hl-number">01</span>-<span class="hl-number">01</span> <span class="hl-number">08</span>:<span class="hl-number">00</span>:<span class="hl-number">00.022368</span>                    <span class="hl-number">31</span>        <span class="hl-number">27.40</span>       <span class="hl-number">26.9</span>         <span class="hl-number">1</span>

  Offer_Price   Offer_Size
<span class="hl-number">0</span>       <span class="hl-number">27.49</span>           <span class="hl-number">10</span>
<span class="hl-number">1</span>       <span class="hl-number">27.49</span>           <span class="hl-number">10</span>
<span class="hl-number">2</span>       <span class="hl-number">27.49</span>           <span class="hl-number">10</span>
<span class="hl-number">3</span>       <span class="hl-number">27.49</span>           <span class="hl-number">10</span>
<span class="hl-number">4</span>       <span class="hl-number">27.49</span>           <span class="hl-number">10</span></pre></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title24" id="merge-window"><h4 class="- topic/title title topictitle4" id="ariaid-title24">merge_window</h4><div class="- topic/body body"><p class="- topic/p p"><code class="+ topic/ph pr-d/codeph ph codeph">merge_window</code> 对应 DolphinDB 中的 <a class="- topic/xref xref" href="../../../../progr/sql/windowjoin.html">window join(wj)</a>，它是 asof join 的扩展。<em class="+ topic/ph hi-d/i ph i">leftBound</em> 参数和 <em class="+ topic/ph hi-d/i ph i">rightBound</em> 参数用于指定窗口的边界 w1 和 w2，对左表中最后一个连接列对应的时间为 t 的记录，在右表中选择 (t+w1) 到 (t+w2) 的时间并且其他连接列匹配的记录，然后对这些记录使用指定的聚合函数。</p><p class="- topic/p p">window join 和 prevailing window join 的唯一区别是，如果右表中没有与窗口左边界时间（即 t+w1）匹配的值，prevailing window join 会选择右表中 (t+w1) 之前的最近时间的记录作为 t+w1 时的记录。如果要使用 prevailing window join，需将 <em class="+ topic/ph hi-d/i ph i">prevailing</em> 参数设置为 True。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">&gt;&gt;&gt; trades.merge_window(quotes, -<span class="hl-number">5000000000</span>, <span class="hl-number">0</span>, aggFunctions=[<span class="hl-string">"avg(Bid_Price)"</span>,<span class="hl-string">"avg(Offer_Price)"</span>], on=[<span class="hl-string">"Symbol"</span>,<span class="hl-string">"Time"</span>]).where(<span class="hl-string">"Time&gt;=07:59:59"</span>).top(<span class="hl-number">10</span>).toDF()
 Time                          Exchange Symbol  Trade_Volume  Trade_Price  avg_Bid_Price  avg_Offer_Price
<span class="hl-number">0</span> <span class="hl-number">1970</span>-<span class="hl-number">01</span>-<span class="hl-number">01</span> <span class="hl-number">08</span>:<span class="hl-number">00</span>:<span class="hl-number">00.022239</span>        <span class="hl-number">75</span>   AAPL           <span class="hl-number">300</span>        <span class="hl-number">27.00</span>          <span class="hl-number">26.90</span>            <span class="hl-number">27.49</span>
<span class="hl-number">1</span> <span class="hl-number">1970</span>-<span class="hl-number">01</span>-<span class="hl-number">01</span> <span class="hl-number">08</span>:<span class="hl-number">00</span>:<span class="hl-number">00.022287</span>        <span class="hl-number">75</span>   AAPL           <span class="hl-number">500</span>        <span class="hl-number">27.25</span>          <span class="hl-number">26.90</span>            <span class="hl-number">27.49</span>
<span class="hl-number">2</span> <span class="hl-number">1970</span>-<span class="hl-number">01</span>-<span class="hl-number">01</span> <span class="hl-number">08</span>:<span class="hl-number">00</span>:<span class="hl-number">00.022317</span>        <span class="hl-number">75</span>   AAPL           <span class="hl-number">335</span>        <span class="hl-number">27.26</span>          <span class="hl-number">26.90</span>            <span class="hl-number">27.49</span>
<span class="hl-number">3</span> <span class="hl-number">1970</span>-<span class="hl-number">01</span>-<span class="hl-number">01</span> <span class="hl-number">08</span>:<span class="hl-number">00</span>:<span class="hl-number">00.022341</span>        <span class="hl-number">75</span>   AAPL           <span class="hl-number">100</span>        <span class="hl-number">27.27</span>          <span class="hl-number">26.90</span>            <span class="hl-number">27.49</span>
<span class="hl-number">4</span> <span class="hl-number">1970</span>-<span class="hl-number">01</span>-<span class="hl-number">01</span> <span class="hl-number">08</span>:<span class="hl-number">00</span>:<span class="hl-number">00.022368</span>        <span class="hl-number">75</span>   AAPL            <span class="hl-number">31</span>        <span class="hl-number">27.40</span>          <span class="hl-number">26.90</span>            <span class="hl-number">27.49</span>
<span class="hl-number">5</span> <span class="hl-number">1970</span>-<span class="hl-number">01</span>-<span class="hl-number">01</span> <span class="hl-number">08</span>:<span class="hl-number">00</span>:<span class="hl-number">02.668076</span>        <span class="hl-number">68</span>   AAPL          <span class="hl-number">2434</span>        <span class="hl-number">27.42</span>          <span class="hl-number">26.75</span>            <span class="hl-number">27.36</span>
<span class="hl-number">6</span> <span class="hl-number">1970</span>-<span class="hl-number">01</span>-<span class="hl-number">01</span> <span class="hl-number">08</span>:<span class="hl-number">02</span>:<span class="hl-number">20.116025</span>        <span class="hl-number">68</span>   AAPL            <span class="hl-number">66</span>        <span class="hl-number">27.00</span>            NaN              NaN
<span class="hl-number">7</span> <span class="hl-number">1970</span>-<span class="hl-number">01</span>-<span class="hl-number">01</span> <span class="hl-number">08</span>:<span class="hl-number">06</span>:<span class="hl-number">31.149930</span>        <span class="hl-number">75</span>   AAPL           <span class="hl-number">100</span>        <span class="hl-number">27.25</span>            NaN              NaN
<span class="hl-number">8</span> <span class="hl-number">1970</span>-<span class="hl-number">01</span>-<span class="hl-number">01</span> <span class="hl-number">08</span>:<span class="hl-number">06</span>:<span class="hl-number">32.826399</span>        <span class="hl-number">75</span>   AAPL           <span class="hl-number">100</span>        <span class="hl-number">27.25</span>            NaN              NaN
<span class="hl-number">9</span> <span class="hl-number">1970</span>-<span class="hl-number">01</span>-<span class="hl-number">01</span> <span class="hl-number">08</span>:<span class="hl-number">06</span>:<span class="hl-number">33.168833</span>        <span class="hl-number">75</span>   AAPL            <span class="hl-number">74</span>        <span class="hl-number">27.25</span>            NaN              NaN

[<span class="hl-number">10</span> rows x <span class="hl-number">6</span> columns]</pre></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title25" id="merge-cross"><h4 class="- topic/title title topictitle4" id="ariaid-title25">merge_cross</h4><div class="- topic/body body"><p class="- topic/p p"><code class="+ topic/ph pr-d/codeph ph codeph">merge_cross</code> 对应 DolphinDB 中的 <a class="- topic/xref xref" href="../../../../progr/sql/crossjoin.html">cross join</a>。交叉连接函数返回两张表的笛卡尔积的结果集。如果左表有 n 行，右表有 m 行，那么笛卡尔积结果集包含 n*m 行。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">&gt;&gt;&gt; s.run(<span class="hl-string">"""
...     t1 = table(2010 2011 2012 as year);
...     t2 = table(`IBM`C`AAPL as Ticker);
... """</span>)
...
&gt;&gt;&gt; t1 = s.table(data=<span class="hl-string">"t1"</span>)
&gt;&gt;&gt; t2 = s.table(data=<span class="hl-string">"t2"</span>)
&gt;&gt;&gt; t1.merge_cross(t2).toDF()
   year Ticker
<span class="hl-number">0</span>  <span class="hl-number">2010</span>    IBM
<span class="hl-number">1</span>  <span class="hl-number">2010</span>      C
<span class="hl-number">2</span>  <span class="hl-number">2010</span>   AAPL
<span class="hl-number">3</span>  <span class="hl-number">2011</span>    IBM
<span class="hl-number">4</span>  <span class="hl-number">2011</span>      C
<span class="hl-number">5</span>  <span class="hl-number">2011</span>   AAPL
<span class="hl-number">6</span>  <span class="hl-number">2012</span>    IBM
<span class="hl-number">7</span>  <span class="hl-number">2012</span>      C
<span class="hl-number">8</span>  <span class="hl-number">2012</span>   AAPL</pre></div></article></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title26" id="rename"><h3 class="- topic/title title topictitle3" id="ariaid-title26">rename</h3><div class="- topic/body body"><p class="- topic/p p">调用该函数可以给表重新设置名称。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">&gt;&gt;&gt; t.tableName()
t
&gt;&gt;&gt; t.rename(<span class="hl-string">"xx"</span>)
&gt;&gt;&gt; t.tableName()
xx</pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注意：</strong> 如果给临时表重新设置名称，会导致临时表无法被及时析构，导致内存泄漏。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title27" id="drop"><h3 class="- topic/title title topictitle3" id="ariaid-title27">drop</h3><div class="- topic/body body"><p class="- topic/p p">调用该函数可以删除表的指定元素。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">&gt;&gt;&gt; trade = s.loadText(WORK_DIR+<span class="hl-string">"/example.csv"</span>)
&gt;&gt;&gt; trade.colNames
[<span class="hl-string">'TICKER'</span>, <span class="hl-string">'date'</span>, <span class="hl-string">'VOL'</span>, <span class="hl-string">'PRC'</span>, <span class="hl-string">'BID'</span>, <span class="hl-string">'ASK'</span>]
&gt;&gt;&gt; t1 = trade.drop([<span class="hl-string">'ask'</span>, <span class="hl-string">'bid'</span>])
&gt;&gt;&gt; t1.colNames
[<span class="hl-string">'TICKER'</span>, <span class="hl-string">'date'</span>, <span class="hl-string">'VOL'</span>, <span class="hl-string">'PRC'</span>]</pre></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title28" id="exec"><h3 class="- topic/title title topictitle3" id="ariaid-title28">exec</h3><div class="- topic/body body"><p class="- topic/p p">由于使用 select 子句总是生成一张表，即使只选择一列数据亦是如此。若需要生成一个标量或者一个向量，建议使用 exec 子句。</p><p class="- topic/p p"><code class="+ topic/ph pr-d/codeph ph codeph">exec</code> 只选择一列时将生成一个 DolphinDB 的向量。在 Python 中使用 <code class="+ topic/ph pr-d/codeph ph codeph">toDF()</code> 加载该对象，可以打印出一个 np.ndarray 对象：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>&gt;&gt;&gt; trade = s.loadText(WORK_DIR+"/example.csv")
&gt;&gt;&gt; trade.exec("ticker").toDF()
['AMZN' 'AMZN' 'AMZN' ... 'NFLX' 'NFLX' 'NFLX']</code></pre><p class="- topic/p p">如果 <code class="+ topic/ph pr-d/codeph ph codeph">exec</code> 语句选择了多列，则结果和 <code class="+ topic/ph pr-d/codeph ph codeph">select</code> 语句一致，将生成一个 DolphinDB 的 table 类型。在 Python 中使用 <code class="+ topic/ph pr-d/codeph ph codeph">toDF()</code> 加载该对象，可以打印出一个 pd.DataFrame 对象：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>&gt;&gt;&gt; trade.exec(["ticker", "date", "bid"]).toDF()
      ticker       date        bid
0       AMZN 1997-05-15   23.50000
1       AMZN 1997-05-16   20.50000
2       AMZN 1997-05-19   20.50000
3       AMZN 1997-05-20   19.62500
4       AMZN 1997-05-21   17.12500
...</code></pre></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title29" id="where"><h3 class="- topic/title title topictitle3" id="ariaid-title29">where</h3><div class="- topic/body body"><p class="- topic/p p"><code class="+ topic/ph pr-d/codeph ph codeph">where</code> 子句用于过滤数据。</p><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">多个过滤条件</p><p class="- topic/p p">where 子句在使用时，如果指定了多个过滤条件，则各个条件之间默认使用 and 连接；如果需要以 or 来连接过滤条件，则需要将 or 连接的条件作为一个条件传入 where 方法。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注：</strong> 1.30.21.2 及之前版本的 API，在添加多个 where 子句时，不会使用括号保证运算优先级，因此，使用时需在筛选条件外添加括号，以保证运算正确性。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">&gt;&gt;&gt; trade = s.loadText(WORK_DIR+<span class="hl-string">"/example.csv"</span>)
&gt;&gt;&gt; t1 = trade.select([<span class="hl-string">'date'</span>,<span class="hl-string">'bid'</span>,<span class="hl-string">'ask'</span>,<span class="hl-string">'prc'</span>,<span class="hl-string">'vol'</span>]).where(<span class="hl-string">'TICKER=`AMZN'</span>).where(<span class="hl-string">'bid!=NULL'</span>).where(<span class="hl-string">'ask!=NULL'</span>).where(<span class="hl-string">'vol&gt;10000000'</span>)
&gt;&gt;&gt; t1.toDF()
          date        bid        ask        prc       vol
<span class="hl-number">0</span>   <span class="hl-number">1998</span>-<span class="hl-number">09</span>-<span class="hl-number">01</span>   <span class="hl-number">79.93750</span>   <span class="hl-number">80.25000</span>   <span class="hl-number">79.95313</span>  <span class="hl-number">11321844</span>
<span class="hl-number">1</span>   <span class="hl-number">1998</span>-<span class="hl-number">11</span>-<span class="hl-number">17</span>  <span class="hl-number">148.68750</span>  <span class="hl-number">149.00000</span>  <span class="hl-number">148.50000</span>  <span class="hl-number">10279448</span>
<span class="hl-number">2</span>   <span class="hl-number">1998</span>-<span class="hl-number">11</span>-<span class="hl-number">20</span>  <span class="hl-number">179.62500</span>  <span class="hl-number">179.75000</span>  <span class="hl-number">180.62500</span>  <span class="hl-number">11314228</span>
<span class="hl-number">3</span>   <span class="hl-number">1998</span>-<span class="hl-number">11</span>-<span class="hl-number">23</span>  <span class="hl-number">217.75000</span>  <span class="hl-number">217.81250</span>  <span class="hl-number">218.00000</span>  <span class="hl-number">11559042</span>
<span class="hl-number">4</span>   <span class="hl-number">1998</span>-<span class="hl-number">11</span>-<span class="hl-number">24</span>  <span class="hl-number">214.25000</span>  <span class="hl-number">214.62500</span>  <span class="hl-number">214.50000</span>  <span class="hl-number">13820992</span>
...
&gt;&gt;&gt; t1.rows
<span class="hl-number">765</span>
&gt;&gt;&gt; t1.showSQL()
select date,bid,ask,prc,vol <strong class="hl-keyword">from</strong> TMP_TBL_<span class="hl-number">2744917</span>d where (TICKER=`AMZN) <strong class="hl-keyword">and</strong> (bid!=NULL) <strong class="hl-keyword">and</strong> (ask!=NULL) <strong class="hl-keyword">and</strong> (vol&gt;<span class="hl-number">10000000</span>)</pre></li><li class="- topic/li li"><p class="- topic/p p">输入内容为字符串</p><p class="- topic/p p"><code class="+ topic/ph pr-d/codeph ph codeph">where</code> 的输入内容可以是包含多个条件的字符串。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">&gt;&gt;&gt; t1 = trade.select(<span class="hl-string">"ticker, date, vol"</span>).where(<span class="hl-string">"bid!=NULL, ask!=NULL, vol&gt;50000000"</span>)
&gt;&gt;&gt; t1.toDF()
  ticker       date        vol
<span class="hl-number">0</span>    AMZN <span class="hl-number">1999</span>-<span class="hl-number">09</span>-<span class="hl-number">29</span>   <span class="hl-number">80380734</span>
<span class="hl-number">1</span>    AMZN <span class="hl-number">2000</span>-<span class="hl-number">06</span>-<span class="hl-number">23</span>   <span class="hl-number">52221978</span>
<span class="hl-number">2</span>    AMZN <span class="hl-number">2001</span>-<span class="hl-number">11</span>-<span class="hl-number">26</span>   <span class="hl-number">51543686</span>
<span class="hl-number">3</span>    AMZN <span class="hl-number">2002</span>-<span class="hl-number">01</span>-<span class="hl-number">22</span>   <span class="hl-number">57235489</span>
<span class="hl-number">4</span>    AMZN <span class="hl-number">2005</span>-<span class="hl-number">02</span>-<span class="hl-number">03</span>   <span class="hl-number">60580703</span>
...
&gt;&gt;&gt; t1.rows
<span class="hl-number">41</span></pre></li></ol></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title30" id="execute"><h3 class="- topic/title title topictitle3" id="ariaid-title30">execute</h3><div class="- topic/body body"><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">Table 类中，该方法表示以 exec 方式选取传入列的数据，传入参数 <code class="+ topic/ph pr-d/codeph ph codeph">expr</code> 为字符串或字符串列表，表示选取的列。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">&gt;&gt;&gt; trade = s.loadText(WORK_DIR+<span class="hl-string">"/example.csv"</span>)
&gt;&gt;&gt; trade.execute(<span class="hl-string">"TICKER"</span>)
[<span class="hl-string">'AMZN'</span> <span class="hl-string">'AMZN'</span> <span class="hl-string">'AMZN'</span> ... <span class="hl-string">'NFLX'</span> <span class="hl-string">'NFLX'</span> <span class="hl-string">'NFLX'</span>]
&gt;&gt;&gt; trade.execute([<span class="hl-string">"VOL"</span>, <span class="hl-string">"PRC"</span>])
           VOL        PRC
<span class="hl-number">0</span>      <span class="hl-number">6029815</span>   <span class="hl-number">23.50000</span>
<span class="hl-number">1</span>      <span class="hl-number">1232226</span>   <span class="hl-number">20.75000</span>
<span class="hl-number">2</span>       <span class="hl-number">512070</span>   <span class="hl-number">20.50000</span>
<span class="hl-number">3</span>       <span class="hl-number">456357</span>   <span class="hl-number">19.62500</span>
<span class="hl-number">4</span>      <span class="hl-number">1577414</span>   <span class="hl-number">17.12500</span>
...        ...        ...
<span class="hl-number">13131</span>  <span class="hl-number">2010120</span>  <span class="hl-number">125.59000</span>
<span class="hl-number">13132</span>  <span class="hl-number">5287520</span>  <span class="hl-number">128.35001</span>
<span class="hl-number">13133</span>  <span class="hl-number">4388956</span>  <span class="hl-number">125.89000</span>
<span class="hl-number">13134</span>  <span class="hl-number">3444729</span>  <span class="hl-number">125.33000</span>
<span class="hl-number">13135</span>  <span class="hl-number">4455012</span>  <span class="hl-number">123.80000</span>

[<span class="hl-number">13136</span> rows x <span class="hl-number">2</span> columns]</pre></li><li class="- topic/li li"><p class="- topic/p p">如果对 Table 类对象执行 update/delete 操作后，必须执行 execute 才能确保在服务端正确执行，此时无需传入参数，也不会以 exec 的形式执行，仅将修改语句提交至服务端执行，并返回一个 Table 对象作为结果。</p></li></ol></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title31" id="executeas"><h3 class="- topic/title title topictitle3" id="ariaid-title31">executeAs</h3><div class="- topic/body body"><p class="- topic/p p"><code class="+ topic/ph pr-d/codeph ph codeph">executeAs</code> 可以把结果保存为 server 端的表对象，表名由参数 <em class="+ topic/ph hi-d/i ph i">newTableName</em> 指定，执行后将返回一个 Table 对象管理新创建的表。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注意：</strong> 通过执行该方法创建的表，其生存周期不受 Python 端控制，而是与 session 的生存周期保持一致。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">&gt;&gt;&gt; trade = s.loadText(WORK_DIR+<span class="hl-string">"/example.csv"</span>)
&gt;&gt;&gt; t1 = trade.select([<span class="hl-string">'date'</span>,<span class="hl-string">'bid'</span>,<span class="hl-string">'ask'</span>,<span class="hl-string">'prc'</span>,<span class="hl-string">'vol'</span>]).where(<span class="hl-string">'TICKER=`AMZN'</span>).where(<span class="hl-string">'bid!=NULL'</span>).where(<span class="hl-string">'ask!=NULL'</span>).where(<span class="hl-string">'vol&gt;10000000'</span>).executeAs(<span class="hl-string">"AMZN"</span>)
&gt;&gt;&gt; t1.tableName()
AMZN</pre></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title32" id="showsql"><h3 class="- topic/title title topictitle3" id="ariaid-title32">showSQL</h3><div class="- topic/body body"><p class="- topic/p p">可以使用 <code class="+ topic/ph pr-d/codeph ph codeph">showSQL</code> 展示 SQL 语句。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock python">&gt;&gt;&gt; trade=s.loadText(WORK_DIR+<span class="hl-string">"/example.csv"</span>)
&gt;&gt;&gt; trade.select([<span class="hl-string">"ticker"</span>, <span class="hl-string">"date"</span>]).showSQL()
select ticker,date <strong class="hl-keyword">from</strong> TMP_TBL_fb11c541</pre></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title33" id="todf-tolist"><h3 class="- topic/title title topictitle3" id="ariaid-title33">toDF, toList</h3><div class="- topic/body body"><p class="- topic/p p">toDF 和 toList 功能类似，都是执行缓存在 Python 端的 SQL 语句（可通过 showSQL 方法获取），并返回执行结果。两者的区别在于，toDF 与 session.run(sql) 一致，toList 则与 session.run(sql, pickleTableToList=True) 行为一致。session 在构造时，如果指定 <code class="+ topic/ph pr-d/codeph ph codeph">protocol=PROTOCOL_PICKLE/PROTOCOL_DDB</code>，则 toDF 将返回一个 pd.DataFrame，toList 返回一个由 np.ndarray 构成的 list，每个 np.ndarray 表示表中的一列。详细区别请参考章节 <a class="- topic/xref xref" href="../DataTypeCasting/PROTOCOL_DDB.html">PROTOCOL_DDB</a> 和 <a class="- topic/xref xref" href="../DataTypeCasting/PROTOCOL_PICKLE.html">PROTOCOL_PICKLE</a>。</p></div></article></article></article></main></div>
                        
                        
                        
                        
                        
                        
                    </div>
                    
                        <nav role="navigation" id="wh_topic_toc" aria-label="On this page" class="col-lg-2 d-none d-lg-block navbar d-print-none"> 
                            <div id="wh_topic_toc_content">
		                        
	                            <div class=" wh_topic_toc "><div class="wh_topic_label">在本页上</div><ul><li class="topic-item"><a href="#table-%E4%B8%8E-sessiontable" data-tocid="table-与-sessiontable">Table 与 session.table</a><ul><li class="topic-item"><a href="#%E4%B8%8A%E4%BC%A0%E6%95%B0%E6%8D%AE%E4%B8%BA%E4%B8%B4%E6%97%B6%E8%A1%A8" data-tocid="上传数据为临时表">上传数据为临时表</a></li><li class="topic-item"><a href="#%E8%8E%B7%E5%8F%96%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%95%B0%E6%8D%AE%E8%A1%A8%E5%8F%A5%E6%9F%84" data-tocid="获取服务端数据表句柄">获取服务端数据表句柄</a></li><li class="topic-item"><a href="#tablealiasname" data-tocid="tablealiasname">tableAliasName</a></li><li class="topic-item"><a href="#inmem-partitions" data-tocid="inmem-partitions">inMem, partitions</a></li></ul></li><li class="topic-item"><a href="#sessionloadtable" data-tocid="sessionloadtable">session.loadTable</a><ul><li class="topic-item"><a href="#%E5%8A%A0%E8%BD%BD%E5%86%85%E5%AD%98%E8%A1%A8" data-tocid="加载内存表">加载内存表</a></li><li class="topic-item"><a href="#%E5%8A%A0%E8%BD%BD%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8" data-tocid="加载数据库表">加载数据库表</a></li></ul></li><li class="topic-item"><a href="#%E4%B8%8A%E4%BC%A0%E7%9A%84%E6%95%B0%E6%8D%AE%E8%A1%A8%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F" data-tocid="上传的数据表的生命周期">上传的数据表的生命周期</a></li><li class="topic-item"><a href="#%E8%A1%A8%E6%93%8D%E4%BD%9C" data-tocid="表操作">表操作</a><ul><li class="topic-item"><a href="#%E8%8E%B7%E5%8F%96%E8%A1%A8%E5%B1%9E%E6%80%A7" data-tocid="获取表属性">获取表属性</a></li><li class="topic-item"><a href="#select" data-tocid="select">select</a></li><li class="topic-item"><a href="#update" data-tocid="update">update</a></li><li class="topic-item"><a href="#delete" data-tocid="delete">delete</a></li><li class="topic-item"><a href="#groupby" data-tocid="groupby">groupby</a></li><li class="topic-item"><a href="#contextby" data-tocid="contextby">contextby</a></li><li class="topic-item"><a href="#pivotby" data-tocid="pivotby">pivotby</a></li><li class="topic-item"><a href="#sort-csort" data-tocid="sort-csort">sort, csort</a></li><li class="topic-item"><a href="#top-limit" data-tocid="top-limit">top, limit</a></li><li class="topic-item"><a href="#merge-merge-asof-merge-window-%E5%92%8C-merge-cross" data-tocid="merge-merge-asof-merge-window-和-merge-cross">merge, merge_asof, merge_window 和 merge_cross</a><ul><li class="topic-item"><a href="#merge" data-tocid="merge">merge</a></li><li class="topic-item"><a href="#merge-asof" data-tocid="merge-asof">merge_asof</a></li><li class="topic-item"><a href="#merge-window" data-tocid="merge-window">merge_window</a></li><li class="topic-item"><a href="#merge-cross" data-tocid="merge-cross">merge_cross</a></li></ul></li><li class="topic-item"><a href="#rename" data-tocid="rename">rename</a></li><li class="topic-item"><a href="#drop" data-tocid="drop">drop</a></li><li class="topic-item"><a href="#exec" data-tocid="exec">exec</a></li><li class="topic-item"><a href="#where" data-tocid="where">where</a></li><li class="topic-item"><a href="#execute" data-tocid="execute">execute</a></li><li class="topic-item"><a href="#executeas" data-tocid="executeas">executeAs</a></li><li class="topic-item"><a href="#showsql" data-tocid="showsql">showSQL</a></li><li class="topic-item"><a href="#todf-tolist" data-tocid="todf-tolist">toDF, toList</a></li></ul></li></ul></div>
	                        	
                        	</div>
                        </nav>
                    
                </div>
            </div>
            
            
            
        </div> 
        <footer class="navbar navbar-default wh_footer">
  <div class=" footer-container mx-auto ">
<title>Copyright</title><p><b> ©2024 浙江智臾科技有限公司 浙ICP备18048711号-3</b></p>
  </div>
</footer>
        
        <div id="go2top" class="d-print-none">
            <span class="oxy-icon oxy-icon-up"></span>
        </div>
        
        <div id="modal_img_large" class="modal">
            <span class="close oxy-icon oxy-icon-remove"></span>
            <div id="modal_img_container"></div>
            <div id="caption"></div>
        </div>
        
        
        
    </body>
</html>